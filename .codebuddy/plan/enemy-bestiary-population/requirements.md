# 需求文档：Enemy_Bestiary.CSV 怪物数据填充 — P1 示巴星 & P2 机械坟场

## 引言

`Enemy_Bestiary.csv` 已完成 50 列的表头扩展，且已有 6 行基础敌人数据（ID 5001–5006）。但这些数据仍是原型级的简单填充，且 `EnemyPlanning.csv` 中规划的 P1（示巴星-废弃矿坑）和 P2（机械坟场-剧毒沼泽）全部怪物尚未录入。

本次任务目标：
1. **完善已有 5001–5006 的数据**，确保每一列数值符合设计意图和代码字段要求
2. **根据 EnemyPlanning.csv 的 P1/P2 规划，新增全部怪物条目**，并以资深怪物设计师的视角赋予每个怪物有挑战性的、符合生态逻辑的、令人难忘的数值和行为设计
3. 所有数值必须与 `EnemyStatsSO.cs` 的字段 1:1 对应，确保后续 `BestiaryImporter` 能正确导入

**数据源参考：**
- `EnemyPlanning.csv`：怪物原型、视觉风格、行为逻辑、设计意图、玩家应对策略
- `EnemyStatsSO.cs`：代码字段定义、默认值、取值范围约束
- `EnemyStats_Rusher.asset` / `EnemyStats_Shooter.asset`：已有的数值基准线

---

## 需求

### 需求 1：完善现有 5001–5006 的数值

**用户故事：** 作为一名怪物设计师，我希望已有的 6 行怪物数据的每一列都有准确的、经过设计的数值，以便它们能作为后续所有怪物的数值基准线。

#### 验收标准

1. WHEN 5001–5006 的数据被审查 THEN 系统 SHALL 确保以下列值与 `EnemyPlanning.csv` 的设计意图一致：`AI_Archetype`, `DesignIntent`, `PlayerCounter`, `Description_Note`, `BehaviorTags`。
2. WHEN 近战型敌人（5001, 5002, 5005）被填充 THEN 远程攻击分组 (F 组) SHALL 全部留空或为 0。
3. WHEN 远程型敌人（5003, 5004）被填充 THEN 远程攻击分组 (F 组) SHALL 全部填写合理数值。
4. WHEN Boss（5006）被填充 THEN 其数值 SHALL 显著高于 Elite 和 Minion，且 `BehaviorTags` 应包含 `SuperArmor`。
5. WHEN 5001–5006 的抗性 (I 组) 和奖励 (J 组) 被填充 THEN 数值 SHALL 基于 Rank 和 EnemyPlanning 的描述合理分配。

**具体数值基准线（基于 EnemyStats_Rusher.asset 和 EnemyStats_Shooter.asset）：**

| 角色类型 | HP 范围 | Poise 范围 | 攻击伤害范围 | 移动速度范围 |
|----------|---------|-----------|-------------|-------------|
| Minion   | 20–80   | 5–20      | 8–15        | 3.0–6.0     |
| Elite    | 60–200  | 20–80     | 15–30       | 2.5–6.0     |
| Boss     | 1500–3000 | 999 (超霸体) | 25–50     | 1.5–3.0     |

---

### 需求 2：新增 P1 示巴星全部怪物

**用户故事：** 作为一名怪物设计师，我希望 P1 示巴星的全部怪物都被录入 `Enemy_Bestiary.csv`，以便示巴星区域拥有完整的、有生态层次的怪物群落。

#### 验收标准

1. WHEN P1 怪物被录入 THEN 系统 SHALL 包含以下全部 12 种怪物（含已有的 5001–5006 映射调整）：

| EnemyPlanning 名称 | 类型 | 已有 ID | 设计要点 |
|---|---|---|---|
| 深渊爬行者 (Rusty Crawler) | Minion | 5001 | 基础杂兵，直线冲锋 |
| 装甲爬行者 (Armored Crawler) | Elite | 5002 | 高血高韧，难以打断 |
| 腐化漂浮者 → **工蜂无人机 (Worker Drone)** | Minion | 5003→改名 | 基础远程，慢速铆钉弹 |
| 固定哨塔 → **天花板钻头 (Ceiling Drill)** | Minion/Hazard | 5004→改名 | 垂直攻击，不可移动 |
| 暗影潜伏者 (Shadow Stalker) | Elite | 5005 | 隐身突袭+脱离 |
| 虫巢母体 → **锈蚀女王 (Rust Queen)** | Boss | 5006→改名 | 多阶段 Boss |
| 酸蚀爬行者 (Acid Crawler) | Minion | **新增** | 死亡留酸液 |
| 自爆蜱虫 (Volatile Tick) | Minion | **新增** | 快速接近自爆 |
| 重型装载机 (Heavy Loader) | Defense | **新增** | 正面无敌+推进 |
| 晶体甲虫 (Reflector Beetle) | Specialist | **新增** | 反射激光 |
| 修理博比特 (Repair Bot) | Support | **新增** | 治疗其他怪物 |
| 暴走工头 (Foreman) | Elite | **新增** | 霸体冲撞+召唤 |
| 盗矿地精 (Loot Goblin) | Gimmick | **新增** | 见到玩家就跑 |
| 挖掘者 9000 (Excavator) | Mini-Boss | **新增** | 暴走采矿车 |

2. WHEN P1 怪物群落被创建 THEN 应体现以下生态层次：
   - **炮灰层**：爬行者（数量优势）、自爆蜱虫（优先击杀）
   - **远程层**：工蜂无人机（基础射击训练）、天花板钻头（垂直空间陷阱）
   - **防御层**：重型装载机（破盾教学）
   - **特化层**：晶体甲虫（武器克制教学）、修理博比特（击杀优先级教学）
   - **精英层**：装甲爬行者（数值压力）、暗影潜伏者（刺客威胁）、暴走工头（综合考题）
   - **Boss 层**：锈蚀女王（章节高潮）、挖掘者 9000（可选 Mini-Boss）

3. IF 某个已有 ID（5001–5006）需要更名以匹配 EnemyPlanning THEN 应更新 `DisplayName` 和 `Description_Note` 列。

---

### 需求 3：新增 P2 机械坟场全部怪物

**用户故事：** 作为一名怪物设计师，我希望 P2 机械坟场的全部怪物都被录入 `Enemy_Bestiary.csv`，以便机械坟场区域在难度、机制、生态多样性上都显著升级。

#### 验收标准

1. WHEN P2 怪物被录入 THEN 系统 SHALL 包含以下全部 12 种怪物：

| EnemyPlanning 名称 | 类型 | 设计要点 |
|---|---|---|
| 机械猎犬 (Scrap Dog) | Minion | 比爬行者更快+绕侧翼+死亡自爆 |
| 狙击炮塔 (Sniper Turret) | Ranged | 红线锁定+Hitscan+极远射程 |
| 迫击炮手 (Mortar Bot) | Ranged | 抛物线榴弹+燃烧区域 |
| 方阵兵 (Phalanx Unit) | Defense | 结对激光墙+分割战场 |
| 磁力钩锁 (Magnet Hook) | Specialist | 强制拉近+配合自爆 |
| 干扰水晶 (Jammer Pylon) | Specialist | 封印技能+光帆过载 |
| 隐形猎手 (Ghost Stalker) | Specialist | 光学迷彩+背刺暴击 |
| 感应地雷 (Proximity Mine) | Hazard | 感应跳起爆炸+可利用 |
| 反应装甲兵 (Reactive Guard) | Specialist | 被攻击反弹导弹+射速惩罚 |
| 电磁处刑者 (Electrocutioner) | Elite | 瞬移连击+沉默效果 |
| 焚化炉 (The Incinerator) | Boss | 全屏高温+召唤废料 |
| 游荡者 (The Roamer) | Mini-Boss | 狙击+风筝+逃跑回血 |

2. WHEN P2 怪物群落被创建 THEN 应体现以下设计升级原则（相比 P1）：
   - **移动速度整体提升**：P2 最慢的杂兵 > P1 中等速度的杂兵
   - **新增"组合威胁"**：磁力钩锁+自爆怪组合、方阵兵激光墙+迫击炮后排
   - **引入环境交互**：感应地雷可引诱怪物踩踏、干扰水晶改变玩家能力
   - **流派检测**：反应装甲兵惩罚高射速、隐形猎手惩罚缺少 AOE
   - **Boss 哲学差异**：焚化炉=DPS 检测（速战速决） vs 游荡者=机动性检测（反向风筝）

3. WHEN P2 怪物的数值被填充 THEN 整体数值应比 P1 提升约 30%–50%：
   - Minion HP: 40–100（P1 为 20–80）
   - Elite HP: 100–250（P1 为 60–200）
   - Boss HP: 2500–4000（P1 为 2000–3000）

---

### 需求 4：怪物设计必须遵循的数值与行为规范

**用户故事：** 作为一名资深怪物设计师，我希望所有怪物的数值设计遵循一套清晰的规范，以便保持整体平衡性和可调节性。

#### 验收标准

1. WHEN 怪物的攻击阶段被设计 THEN 必须遵循"信号-窗口"模型：
   - TelegraphDuration（前摇）：玩家读信号并做决策的时间
   - AttackActiveDuration（判定窗口）：实际造成伤害的时间
   - RecoveryDuration（后摇）：玩家惩罚敌人的窗口
   - 规则：`前摇 >= 判定窗口`，`后摇 >= 判定窗口`

2. WHEN 怪物的感知数值被设计 THEN 应遵循：
   - `HearingRange > SightRange`（先听到再看到，符合现实逻辑）
   - Boss 类 `SightAngle = 360` 或极大值（全方位感知）
   - 远程型 `SightRange > 近战型 SightRange`

3. WHEN 怪物的击退力被设计 THEN 应遵循：
   - 越大的怪物击退力越大
   - 近战击退 > 远程弹丸击退（接触冲击 > 弹丸冲击）
   - Boss 近战击退应足以将玩家推出攻击范围

4. WHEN 怪物的抗性被设计 THEN 应遵循：
   - Minion：通常无抗性（全 0）
   - Elite：至少一项 0.2–0.5 的特色抗性
   - Boss：均匀中等抗性（0.2–0.3）+ 一项主题弱点（0 或负数代表弱点效果增强）
   - 特化型：一项极高抗性（0.8–1.0）+ 明确的弱点

5. WHEN ExpReward 被设计 THEN 应遵循：
   - Minion: 5–15 EXP
   - Elite: 20–50 EXP
   - Mini-Boss: 100–200 EXP
   - Boss: 500+ EXP

---

### 需求 5：CSV 格式与兼容性

**用户故事：** 作为一名程序员，我希望 CSV 文件格式严格遵循已有的 50 列表头定义，以便 `BestiaryImporter` 能正确解析。

#### 验收标准

1. WHEN CSV 被写入 THEN 表头 SHALL 保持与当前 `Enemy_Bestiary.csv` 完全一致的 50 列顺序和列名。
2. WHEN 某个字段不适用时（如近战型的远程列） THEN 该列 SHALL 留空（两个逗号间无内容）。
3. WHEN 文本字段包含逗号 THEN 该字段值 SHALL 用双引号包裹。
4. IF 某行需要在 Description_Note 中记录详细的设计说明 THEN 该字段 SHALL 用双引号包裹以支持内部逗号和换行。

---

## 怪物设计方案

### P1 示巴星 — 废弃矿坑 怪物全览

> **主题关键词**：工业废墟、锈蚀金属、矿虫寄生、新手教学
> **难度定位**：教学区（4h 游玩时间），重点教会玩家基础战斗语法

#### 已有怪物（5001–5006）数值完善方向

| ID | 怪物 | 完善重点 |
|---|---|---|
| 5001 | 深渊爬行者 | 确认为P1最基础杂兵，EXP=5，无抗性，无特殊标签 |
| 5002 | 装甲爬行者 | 升级为Elite，物理抗性0.3，EXP=20 |
| 5003 | 重命名为"工蜂无人机"，匹配EnemyPlanning | 更新DisplayName/InternalName/Description |
| 5004 | 重命名为"天花板钻头"，固定型 | MoveSpeed=0, RotationSpeed=180, SightAngle=180 |
| 5005 | 暗影潜伏者 | 添加Invisible标签，虚空抗性0.3 |
| 5006 | 重命名为"锈蚀女王"，匹配EnemyPlanning | 更新DisplayName，保持Boss数值 |

#### P1 新增怪物设计

**5007 — 酸蚀爬行者 (Acid Crawler)**
- **职能**：Minion / 战场分割者
- **核心机制**：死亡后留下酸液池(3秒)，踩踏持续伤害
- **设计哲学**：惩罚无脑后退——你杀死的敌人会变成地形障碍
- **数值定位**：略弱于基础爬行者（HP 25），但死亡后的酸液价值更高
- **生态位**：与爬行者混编出现，迫使玩家注意脚下

**5008 — 自爆蜱虫 (Volatile Tick)**
- **职能**：Minion / 优先击杀目标
- **核心机制**：快速接近→起跳→自爆(无视掩体)
- **设计哲学**：制造瞬间紧张感——"那个红色的先杀！"
- **数值定位**：极低HP(15)、极高移动速度(7)、自爆伤害(30)
- **生态位**：穿插在爬行者群中，迫使玩家转火

**5009 — 重型装载机 (Heavy Loader)**
- **职能**：Defense / 破盾教学
- **核心机制**：正面无敌(反射子弹)、缓慢推进、将玩家逼入死角
- **设计哲学**：教导"正面刚枪无效"——第一个绕背教学怪
- **数值定位**：高HP(100)、极低速度(1.5)、高击退(12)
- **生态位**：单独出现或与修理博比特配对

**5010 — 晶体甲虫 (Reflector Beetle)**
- **职能**：Specialist / 武器克制教学
- **核心机制**：反射所有激光类攻击，实弹减伤50%
- **设计哲学**：第一个"Build质检员"——强迫玩家发现武器多样性的价值
- **数值定位**：中等HP(50)、低速(2.5)、无主动攻击能力（反射即攻击）
- **生态位**：稀少出现，通常守卫重要通道

**5011 — 修理博比特 (Repair Bot)**
- **职能**：Support / 击杀优先级教学
- **核心机制**：不攻击、专门修复重型装载机的护盾、躲在掩体后
- **设计哲学**：教导"先杀奶妈"——战斗永远清不完直到你改变策略
- **数值定位**：低HP(35)、中速(4.5)、治疗量(8HP/秒)
- **生态位**：必定与重型装载机配对出现

**5012 — 暴走工头 (Foreman)**
- **职能**：Elite / P1综合考题
- **核心机制**：霸体冲撞(破坏掩体)、怒吼召唤3只爬行者
- **设计哲学**：P1的"小考"——检验DPS和生存的平衡
- **数值定位**：高HP(180)、高韧(60)、冲撞伤害(25)
- **生态位**：关键节点的精英守卫

**5013 — 盗矿地精 (Loot Goblin)**
- **职能**：Gimmick / 贪婪测试
- **核心机制**：见到玩家就跑、掉落大量晶体、故意跑向陷阱区
- **设计哲学**：贪婪是原罪——追击它会引入危险区域
- **数值定位**：低HP(40)、极高速度(8)、零攻击力、高EXP(50)
- **生态位**：稀有出现，总是接近危险区域

**5014 — 挖掘者 9000 (Excavator)**
- **职能**：Mini-Boss / 游荡威胁
- **核心机制**：冲撞+落石+激光扫射+全场乱跑
- **设计哲学**：可选战斗+早期劝退者——看到它可以先跑
- **数值定位**：Boss级HP(1500)、中速(3)、高伤(35)
- **生态位**：地图上的固定游荡路线，可回避

### P2 机械坟场 — 剧毒沼泽 怪物全览

> **主题关键词**：废弃工厂、毒液腐蚀、机械尸骸、难度升级
> **难度定位**：拓展区（4h 游玩时间），在P1基础上引入组合威胁和流派检测

#### P2 新增怪物设计

**5015 — 机械猎犬 (Scrap Dog)**
- **职能**：Minion / 机动性压力
- **核心机制**：比爬行者更快+绕侧翼包抄+被击毁后自爆
- **设计哲学**：P2的爬行者升级版——不再是直线冲锋，开始绕背
- **数值定位**：中HP(45)、高速(5.5)、死亡自爆伤害(20)
- **生态位**：成群出现，从多方向夹击

**5016 — 狙击炮塔 (Sniper Turret)**
- **职能**：Ranged / 掩体机制教学
- **核心机制**：红线锁定2秒→Hitscan高伤→极远射程
- **设计哲学**：强迫寻找掩体——空地上站着就是死
- **数值定位**：中HP(60)、不可移动、极高伤害(40)、极远射程(20)
- **生态位**：固定在高处，控制大片开阔区域

**5017 — 迫击炮手 (Mortar Bot)**
- **职能**：Ranged / 反掩体
- **核心机制**：抛物线榴弹+落地燃烧区域(4秒)
- **设计哲学**：克制躲掩体——你以为安全的地方也会被炮击
- **数值定位**：中HP(55)、低速(2)、榴弹伤害(15)、燃烧DPS(5/秒)
- **生态位**：与狙击炮塔配合——一个逼你出掩体，一个逼你进掩体

**5018 — 方阵兵 (Phalanx Unit)**
- **职能**：Defense / 阵型破坏
- **核心机制**：两两结对+中间激光墙+触碰击退
- **设计哲学**：限制移动空间——战场被切割成小格子
- **数值定位**：中HP(70)、低速(2.5)、激光墙伤害(10/秒)
- **生态位**：狭窄走廊中封锁去路

**5019 — 磁力钩锁 (Magnet Hook)**
- **职能**：Specialist / 强制位移
- **核心机制**：将远处玩家拉到身前+造成晕眩+配合自爆怪
- **设计哲学**：破坏节奏——你精心维持的距离被一把拉碎
- **数值定位**：中HP(65)、低速(2)、钩锁射程(12)、晕眩(1秒)
- **生态位**：配合机械猎犬/自爆类形成必杀Combo

**5020 — 干扰水晶 (Jammer Pylon)**
- **职能**：Specialist / 技能封印
- **核心机制**：持续噪声+范围内禁用主动技能+光帆过载
- **设计哲学**：针对技能流——逼迫玩家依赖平射基本功
- **数值定位**：中HP(80)、不可移动、无攻击力、干扰半径(8)
- **生态位**：守卫关键通道，必须优先拆除

**5021 — 隐形猎手 (Ghost Stalker)**
- **职能**：Specialist / 观察力检测
- **核心机制**：光学迷彩+背刺必暴击+攻击现形+移动无声
- **设计哲学**：P2更暗——教导"听声辨位"和背后防守
- **数值定位**：中HP(55)、高速(5)、暴击伤害(35)
- **生态位**：昏暗区域单独出没

**5022 — 感应地雷 (Proximity Mine)**
- **职能**：Hazard / 环境利用
- **核心机制**：埋在土中+红灯闪烁+感应跳起爆炸+1秒延时
- **设计哲学**：既是陷阱也是武器——可以引诱怪物踩雷
- **数值定位**：极低HP(10)、不可移动、爆炸伤害(35)、感应半径(3)
- **生态位**：散布在走廊和房间中

**5023 — 反应装甲兵 (Reactive Guard)**
- **职能**：Specialist / 射速惩罚
- **核心机制**：每次被攻击反弹导弹+攻速越快死得越快+内置CD 0.2秒
- **设计哲学**：惩罚加特林/冲锋枪——教导"点射"
- **数值定位**：高HP(90)、低速(2)、反弹导弹伤害(12)
- **生态位**：守卫宝物房，需要切换武器策略

**5024 — 电磁处刑者 (Electrocutioner)**
- **职能**：Elite / 反应力考题
- **核心机制**：瞬移到背后+连击+沉默效果+高攻速
- **设计哲学**：近战压迫——不给喘息机会，类似格斗游戏
- **数值定位**：高HP(150)、极高速度(6.5)、连击伤害(18×3)
- **生态位**：关键节点精英守卫

**5025 — 焚化炉 (The Incinerator)**
- **职能**：Boss / DPS检测
- **核心机制**：火焰喷射+全屏高温(持续掉血)+召唤废料雨+吞噬回血
- **设计哲学**：软狂暴——全屏高温迫使速战速决
- **数值定位**：Boss级HP(3000)、高抗火(0.8)、全屏DOT(3/秒)
- **生态位**：P2章节最终Boss

**5026 — 游荡者 (The Roamer)**
- **职能**：Mini-Boss / 反向风筝
- **核心机制**：狙击+超远距离风筝+逃跑回血
- **设计哲学**：它会跑你要追——反传统Boss战体验
- **数值定位**：中HP(1200)、高速(5)、狙击伤害(30)、回血(10HP/秒逃跑时)
- **生态位**：P2开放区域游荡Mini-Boss

---

## 边界情况与注意事项

1. **5001–5006 的 ID 保持不变**，仅更新数值和 DisplayName
2. **新增怪物 ID 从 5007 开始连续编号**
3. **近战型怪物**的远程列全部留空（ProjectilePrefab 到 RetreatRange）
4. **Hazard/固定型怪物**的 MoveSpeed=0，但仍需有 RotationSpeed（炮塔需要旋转瞄准）
5. **自爆型怪物**的 BehaviorTags 应包含 `SelfDestruct`
6. **Boss** 的 LeashRange=999（不会脱战），MemoryDuration=999（不会忘记玩家）
7. **所有 PrefabPath 遵循 `Enemies/` 前缀**的命名规范
8. **Description_Note 字段**包含逗号时必须用双引号包裹
