# ğŸ“„ é™é»˜æ–¹èˆŸ (Project Sheba) - å°„å‡»ç³»ç»Ÿæ ¸å¿ƒæ¡†æ¶ç­–åˆ’æ¡ˆï¼ˆâœ… å·²å®Œæˆï¼‰

**ç‰ˆæœ¬ï¼š** v1.0 (M1-Week 2)

**ç›®æ ‡ï¼š** æ„å»ºé€šç”¨ã€é«˜æ€§èƒ½çš„å¼¹é“å°„å‡»åŸºç¡€ï¼Œä¸ºåç»­"æ˜Ÿå›¾ç³»ç»Ÿ"çš„å¤æ‚å­å¼¹æ„å»ºæä¾›åº•å±‚æ”¯æŒã€‚

**æ ¸å¿ƒä½“éªŒï¼š** è¿™æ˜¯ä¸€ä¸ªåŒæ‘‡æ†å°„å‡»ï¼ˆTwin-Stick Shooterï¼‰ç³»ç»Ÿã€‚å°„å‡»åº”å½“æ„Ÿè§‰æ¸…è„†ã€å“åº”è¿…é€Ÿï¼Œå¹¶ä¸”èƒ½æ”¯æŒé«˜å¯†åº¦çš„å¼¹å¹•äº¤äº’ã€‚

---

## 1. åŸºç¡€å°„å‡»æµç¨‹ (Core Loop)

### 1.1 è¾“å…¥å“åº”

- **è§¦å‘æ–¹å¼**ï¼š
  - **æŒ‰ä¸‹ (Press)**ï¼šå‘å°„å•å‘å­å¼¹ï¼ˆæˆ–ç¬¬ä¸€å‘ï¼‰ã€‚
  - **æŒ‰ä½ (Hold)**ï¼šæ ¹æ®"å°„é€Ÿ (Fire Rate)"å‚æ•°æŒç»­è‡ªåŠ¨è¿å‘ã€‚
- **ç„å‡†æœºåˆ¶**ï¼š
  - å­å¼¹å§‹ç»ˆå‘**å½“å‰é£èˆ¹çš„ç„å‡†å…‰æ ‡ (Cursor/Crosshair)** æ–¹å‘å‘å°„ã€‚
  - *æ³¨ï¼š* å³ä½¿é£èˆ¹èˆ¹å¤´æ—‹è½¬æœ‰å»¶è¿Ÿï¼ˆæƒ¯æ€§ï¼‰ï¼Œå­å¼¹å‘å°„çš„åˆ¤å®šåº”ä»¥"å‡†æ˜Ÿæ–¹å‘"ä¸ºå‡†ï¼Œè¿˜æ˜¯"èˆ¹å¤´æœå‘"ä¸ºå‡†ï¼Ÿ
    - **å†³ç­–**ï¼šä¸ºäº†æ‰‹æ„Ÿç²¾å‡†åº¦ï¼Œå­å¼¹æ²¿**èˆ¹å¤´å½“å‰çš„å®é™…æœå‘**å‘å°„ã€‚ç©å®¶éœ€è¦ç­‰å¾…é£èˆ¹è½¬è¿‡æ¥ï¼ˆå°½ç®¡è½¬é€Ÿå¾ˆå¿«ï¼‰ã€‚

### 1.2 å‘å°„è¡Œä¸º

æ¯æ¬¡è§¦å‘"å‘å°„"æ—¶ï¼Œç³»ç»ŸæŒ‰é¡ºåºæ‰§è¡Œä»¥ä¸‹é€»è¾‘ï¼š

1. **ç”Ÿæˆ**ï¼šåœ¨é£èˆ¹çš„ `FirePoint`ï¼ˆç‚®å£ä½ç½®ï¼‰ç”Ÿæˆä¸€é¢—å­å¼¹å®ä½“ã€‚
2. **åˆé€Ÿåº¦**ï¼šç«‹å³ç»™äºˆå­å¼¹ä¸€ä¸ªæ²¿ç„å‡†æ–¹å‘çš„åˆé€Ÿåº¦ã€‚
3. **åååŠ› (Recoil)**ï¼š
  - ç»™é£èˆ¹æ–½åŠ ä¸€ä¸ªå¾®å°çš„åå‘åŠ›ï¼ˆæ¨åŠ›ï¼‰ã€‚
  - *æ‰‹æ„Ÿç›®çš„*ï¼šå¢å¼ºå°„å‡»çš„"ç‰©ç†æ‰“å‡»æ„Ÿ"ï¼Œåœ¨å†°é¢æ»‘è¡Œç§»åŠ¨æ—¶ï¼Œå¼€ç«ä¼šè½»å¾®æ”¹å˜æ»‘è¡Œè½¨è¿¹ã€‚
4. **å†·å´**ï¼šè¿›å…¥ `1 / Fire Rate` ç§’çš„å†·å´æ—¶é—´ã€‚

---

## 2. å­å¼¹è¡Œä¸ºè§„èŒƒ (Projectile Behavior)

### 2.1 è¿åŠ¨é€»è¾‘

- **ç±»å‹**ï¼šéç±»ä¼¼ã€ŠCS:GOã€‹çš„å°„çº¿åˆ¤å®š (Raycast)ï¼Œè€Œæ˜¯**å®ä½“æŠ•å°„ç‰© (Physical Projectile)**ã€‚
- **å¼¹é“**ï¼šé»˜è®¤æ²¿ç›´çº¿åŒ€é€Ÿé£è¡Œã€‚
- **ç©¿é€æ€§**ï¼šé»˜è®¤ä¸ç©¿é€ã€‚å‡»ä¸­ç¬¬ä¸€ä¸ªæœ‰æ•ˆç›®æ ‡åé”€æ¯ã€‚

### 2.2 ç¢°æ’åˆ¤å®š (Collision)

å­å¼¹éœ€è¦æ£€æµ‹ä»¥ä¸‹ä¸¤ç±»ç¢°æ’ï¼š

1. **ç¯å¢ƒ (Wall/Obstacle)**ï¼š
  - **ç»“æœ**ï¼šå­å¼¹ç«‹å³é”€æ¯ã€‚
  - **åé¦ˆ**ï¼šåœ¨æ’å‡»ç‚¹ç”Ÿæˆ"ç«èŠ±/ç¢å±‘"ç‰¹æ•ˆï¼Œç•™ä¸‹çŸ­æš‚çš„æ’å‡»è´´å›¾ï¼ˆå¯é€‰ï¼‰ã€‚
2. **æ•Œäºº (Enemy)**ï¼š
  - **ç»“æœ**ï¼šå­å¼¹ç«‹å³é”€æ¯ã€‚
  - **é€»è¾‘**ï¼šæ‰£é™¤æ•Œäººç”Ÿå‘½å€¼ = `CurrentDamage`ã€‚
  - **åé¦ˆ**ï¼šæ•Œäººæ’­æ”¾å—å‡»åŠ¨ç”»/é—ªç™½ï¼Œé£˜å‡ºä¼¤å®³æ•°å­—ã€‚

### 2.3 ç”Ÿå‘½å‘¨æœŸ (Lifetime)

- ä¸ºäº†é˜²æ­¢å­å¼¹é£å‡ºåœ°å›¾æ— é™å ç”¨èµ„æºï¼Œæ¯é¢—å­å¼¹å¿…é¡»æ‹¥æœ‰ä¸€ä¸ª **æœ€å¤§å­˜æ´»æ—¶é—´ (Max Lifetime)**ï¼ˆä¾‹å¦‚ 3.0ç§’ï¼‰ã€‚
- è¶…æ—¶æœªå‘ç”Ÿç¢°æ’ï¼Œå­å¼¹è‡ªåŠ¨é”€æ¯ï¼ˆ"ç†„ç­"ï¼‰ã€‚

---

## 3. æ ¸å¿ƒå‚æ•°å®šä¹‰ (Weapon Stats)

è¿™æ˜¯åç»­"æ˜Ÿå›¾ç³»ç»Ÿ"çš„åŸºç¡€ã€‚ç›®å‰è™½ç„¶æ²¡æœ‰å¤æ‚çš„éƒ¨ä»¶ç»„åˆï¼Œä½†æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ª**"æ ‡å‡†æ­¦å™¨"**åŒ…å«å“ªäº›æ•°æ®ï¼š


|           |                   |           |                                  |
| --------- | ----------------- | --------- | -------------------------------- |
| **å‚æ•°åç§°**  | **è‹±æ–‡ ID**         | **é»˜è®¤å€¼ç¤ºä¾‹** | **åŠŸèƒ½æè¿°**                         |
| **å°„é€Ÿ**    | `FireRate`        | 5.0 /ç§’    | æ¯ç§’å‘å°„å¤šå°‘å‘å­å¼¹ã€‚å†³å®šäº†è¿å‘çš„å¯†åº¦ã€‚              |
| **åŸºç¡€ä¼¤å®³**  | `BaseDamage`      | 10        | å­å¼¹å‘½ä¸­æ—¶é€ æˆçš„æ•°å€¼å‰Šå‡ã€‚                    |
| **é£è¡Œé€Ÿåº¦**  | `ProjectileSpeed` | 20.0      | å­å¼¹ç§»åŠ¨çš„å¿«æ…¢ã€‚å¤ªæ…¢ä¼šå¯¼è‡´ç©å®¶éœ€è¦é¢„åˆ¤ï¼ˆæ‰‹æ„Ÿå·®ï¼‰ï¼Œå¤ªå¿«ä¼šåƒæ¿€å…‰ã€‚ |
| **å°„ç¨‹/å¯¿å‘½** | `Lifetime`        | 2.0 ç§’     | `é€Ÿåº¦ * å¯¿å‘½ = æœ€å¤§å°„ç¨‹`ã€‚                |
| **æ•£å¸ƒ**    | `Spread`          | 0Â°        | æ¯æ¬¡å‘å°„æ—¶çš„éšæœºè§’åº¦åå·®ã€‚ç›®å‰é»˜è®¤ä¸º 0ï¼ˆç²¾å‡†ï¼‰ã€‚        |
| **å‡»é€€åŠ›**   | `Knockback`       | 1.0       | å‘½ä¸­æ•Œäººæ—¶ï¼Œå°†æ•Œäººå‘åæ¨çš„åŠ›çš„å¤§å°ã€‚               |
| **è‡ªèº«åååŠ›** | `RecoilForce`     | 0.5       | å¼€ç«æ—¶æ¨é£èˆ¹çš„åŠ›ã€‚                        |


---

## 4. è¡¨ç°ä¸åé¦ˆ (Juice & Feedback)

åœ¨ M1 é˜¶æ®µï¼Œæˆ‘ä»¬éœ€è¦éªŒè¯çš„æ˜¯"çˆ½å¿«æ„Ÿ"ã€‚ä»¥ä¸‹åé¦ˆæ˜¯å¿…é¡»çš„ï¼š

### 4.1 è§†è§‰ (Visual)

- **å­å¼¹æ ·å¼**ï¼š
  - ç›®å‰ä½¿ç”¨ä¸´æ—¶èµ„æºï¼šä¸€ä¸ªå‘å…‰çš„ã€é•¿æ¡å½¢çš„**é’è‰²æ™¶ä½“ (Cyan Crystal)**ã€‚
  - æ‹–å°¾ (Trail)ï¼šå­å¼¹å°¾éƒ¨éœ€è¦æœ‰çŸ­ä¿ƒçš„å…‰å¸¦æ‹–å°¾ï¼Œå¢å¼ºé€Ÿåº¦æ„Ÿã€‚
- **ç‚®å£ç„° (Muzzle Flash)**ï¼š
  - å¼€ç«ç¬é—´ï¼Œåœ¨ç‚®å£å¤„æ’­æ”¾ä¸€ä¸ªç¬é—´æ¶ˆå¤±çš„åœ†å½¢å…‰åœˆæˆ–é”¥å½¢å…‰èŠ’ã€‚
- **æ’å‡»ç‰¹æ•ˆ (Impact)**ï¼š
  - å­å¼¹æ¶ˆå¤±æ—¶ï¼Œäº§ç”Ÿ 3-5 ä¸ªå‘å¤–é£æº…çš„ç²’å­ï¼ˆç¢ç‰‡ï¼‰ã€‚

### 4.2 å¬è§‰ (Audio)

- **å‘å°„éŸ³æ•ˆ**ï¼šæ¸…è„†ã€çŸ­ä¿ƒçš„èƒ½é‡é‡Šæ”¾å£°ï¼ˆç±»ä¼¼"Pew"æˆ–ç»ç’ƒæ•²å‡»å£°ï¼‰ã€‚éœ€è®¾ç½®éŸ³è°ƒéšæœºåŒ–ï¼ˆPitch Randomness Â±0.1ï¼‰ï¼Œé˜²æ­¢è¿å°„æ—¶å£°éŸ³ç”±äºé‡å¤è€Œåˆºè€³ã€‚
- **å‘½ä¸­éŸ³æ•ˆ**ï¼šæ²‰é—·çš„æ’å‡»å£°ã€‚

### 4.3 å±å¹•åé¦ˆ (Camera)

- **å±å¹•éœ‡åŠ¨ (Screen Shake)**ï¼š
  - æ¯æ¬¡å¼€ç«äº§ç”Ÿæå…¶å¾®å°çš„éœ‡åŠ¨ï¼ˆImpulseï¼‰ã€‚
  - éœ‡åŠ¨æ–¹å‘ï¼šæ²¿å°„å‡»æ–¹å‘çš„åæ–¹å‘ã€‚

---

## 5. æ‰©å±•æ€§é¢„ç•™ (Future Proofing)

è™½ç„¶æœ¬é˜¶æ®µä¸å®ç°ï¼Œä½†ç­–åˆ’æ¡ˆéœ€æ˜ç¡®**æ˜Ÿå›¾ç³»ç»Ÿ (The Loom)** å°†å¦‚ä½•æ¥ç®¡è¿™äº›æ•°æ®ï¼š

1. **æ•°æ®æ¥æºå˜æ›´**ï¼š
  - *ç°åœ¨*ï¼šæ•°æ®ç›´æ¥è¯»å–è‡ª `ShipStatsSO`ã€‚
  - *æœªæ¥*ï¼šæ•°æ®å°†ç”± `Core`ï¼ˆå†³å®šå‘å°„æ¨¡å¼ï¼‰+ `Prism`ï¼ˆä¿®æ­£å‚æ•°ï¼‰åŠ¨æ€è®¡ç®—å¾—å‡ºã€‚
  - *ç¤ºä¾‹*ï¼šè£…ä¸Š"éœ°å¼¹æ£±é•œ"åï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¿®æ”¹ `Spread`ï¼ˆæ•£å¸ƒå˜å¤§ï¼‰ã€`Damage`ï¼ˆä¼¤å®³å˜å°ï¼‰å’Œ `ProjectileCount`ï¼ˆä¸€æ¬¡ç”Ÿæˆå¤šé¢—ï¼‰ã€‚
2. **é€»è¾‘æ³¨å…¥**ï¼š
  - ç›®å‰çš„å­å¼¹åªæ˜¯"ç›´é£"ã€‚
  - æœªæ¥å­å¼¹éœ€è¦æ”¯æŒ `OnUpdate()` é’©å­ï¼Œä»¥ä¾¿å®ç°"è¿½è¸ªå¯¼å¼¹"æˆ–"å›æ—‹é•–"é€»è¾‘ã€‚

---

## 6. éªŒæ”¶æ ‡å‡† (Acceptance Criteria)

å½“æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ—¶ï¼Œè§†ä¸ºæœ¬åŠŸèƒ½å¼€å‘å®Œæˆï¼š

1. æŒ‰ä½é¼ æ ‡å·¦é”®ï¼Œé£èˆ¹èƒ½ä»¥ç¨³å®šé¢‘ç‡è¿ç»­å‘å°„å­å¼¹ã€‚
2. å­å¼¹èƒ½å‡†ç¡®é£å‘é¼ æ ‡æŒ‡ç¤ºçš„æ–¹å‘ã€‚
3. å­å¼¹æ’å¢™ä¼šæ¶ˆå¤±ã€‚
4. **æ€§èƒ½æµ‹è¯•**ï¼šå…¨å±å‘å°„ 100+ å‘å­å¼¹æ—¶ï¼Œå¸§ç‡æ— æ˜æ˜¾æ³¢åŠ¨ï¼ˆè¯æ˜å¯¹è±¡æ± ç”Ÿæ•ˆï¼‰ã€‚
5. **æ‰‹æ„Ÿæµ‹è¯•**ï¼šåœ¨ç§»åŠ¨ä¸­å¼€ç«ï¼Œèƒ½æ„Ÿå—åˆ°å¾®å¼±çš„åååŠ›å¸¦æ¥çš„æ»‘è¡Œæ„Ÿå˜åŒ–ã€‚  
  
  


# ğŸŒŒ ç³»ç»Ÿç­–åˆ’æ¡ˆï¼šæ˜Ÿå›¾ç¼–ç»‡ç³»ç»Ÿ (The Star Chart System)ï¼ˆğŸ”§ å®ç°ä¸­ï¼‰

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv3.0 (M1-W2 æœ€ç»ˆå®šç¨¿) **ä¼˜å…ˆçº§**ï¼šP0 (æ ¸å¿ƒæˆ˜æ–—ç³»ç»Ÿ) **é˜…è¯»å¯¹è±¡**ï¼šä¸»ç¨‹åºã€ç³»ç»Ÿç¨‹åºã€æ•°å€¼ç­–åˆ’

### å®ç°è¿›åº¦æ€»è§ˆ

| æ‰¹æ¬¡ | å†…å®¹ | çŠ¶æ€ |
|------|------|------|
| Batch 1 | çƒ­é‡ç³»ç»Ÿ + æ˜Ÿå›¾ SO æ•°æ®å±‚ | âœ… å·²å®Œæˆ |
| Batch 2 | æ§½ä½æ¶æ„ + å‘å°„ç®¡çº¿é‡æ„ | âœ… å·²å®Œæˆ |
| Batch 3 | å…‰å¸†æ¡†æ¶ + ä¼´æ˜Ÿè¿è¡Œæ—¶ | âœ… å·²å®Œæˆ |
| Batch 4 | æ˜Ÿå›¾ UI + çƒ­é‡ HUD | âœ… ä»£ç å·²å®Œæˆï¼Œå¾… Unity ç¼–è¾‘å™¨æ­å»º |
| Batch 5 | å…·ä½“éƒ¨ä»¶å®ç°ï¼ˆå„å®¶æ— Core/Prismï¼‰ | âœ… ä»£ç å·²å®Œæˆï¼Œå¾… Unity ç¼–è¾‘å™¨åˆ›å»ºèµ„äº§ |
| Batch 6 | ç¼–ç»‡æ€äº¤äº’ä½“éªŒï¼ˆé•œå¤´/åå¤„ç†/è§†å·®ï¼‰ | ğŸŸ¢ è§„åˆ’ä¸­ |

---

## 1. ç³»ç»Ÿç»¼è¿° (System Overview)

**"æ˜Ÿå›¾"** æ˜¯ç©å®¶ç”¨äºæ„å»ºé£èˆ¹æˆ˜æ–—æ–¹å¼çš„æ¨¡å—åŒ–ç³»ç»Ÿã€‚ å®ƒæŠ›å¼ƒäº†ä¼ ç»Ÿçš„"æ­¦å™¨åˆ‡æ¢"é€»è¾‘ï¼ˆSlot 1 æ¢ Slot 2ï¼‰ï¼Œé‡‡ç”¨ **"å¹¶è¡Œè½¨é“ + å‚ç›´ä¿®æ­£"** çš„ç»„è£…é€»è¾‘ã€‚

**æ ¸å¿ƒéšå–»ï¼š** ç©å®¶æ˜¯åœ¨ä¸€ä¸ªç²¾å¯†çš„**æ˜Ÿç›˜**ä¸Šé•¶åµŒå®çŸ³ã€‚

- **æ˜Ÿæ ¸ (Star Core)** æ˜¯å…‰æºã€‚
- **æ£±é•œ (Prism)** æ˜¯æ»¤é•œã€‚
- å…‰æºé€è¿‡æ»¤é•œï¼ŒæŠ˜å°„å‡ºæœ€ç»ˆçš„æ”»å‡»å½¢æ€ã€‚

---

## 2. éƒ¨ä»¶å®ä½“å®šä¹‰ (Component Definitions) â€” âœ… SO æ•°æ®å±‚å·²å®Œæˆ

> **Batch 1 å·²å®Œæˆï¼š** æ‰€æœ‰å››ç§éƒ¨ä»¶çš„ ScriptableObject æ•°æ®ç±»å·²å®šä¹‰ï¼ˆ`StarChartItemSO` æŠ½è±¡åŸºç±» + `StarCoreSO`ã€`PrismSO`ã€`LightSailSO`ã€`SatelliteSO`ï¼‰ã€‚æšä¸¾å·²å®šä¹‰ï¼ˆ`StarChartItemType`ã€`CoreFamily`ã€`PrismFamily`ã€`ModifierOperation`ã€`WeaponStatType`ï¼‰ã€‚`StatModifier` æ•°æ®ç»“æ„å·²å®šä¹‰ã€‚åœ¨ Unity ç¼–è¾‘å™¨ä¸­å¯é€šè¿‡ Create > ProjectArk > StarChart åˆ›å»ºæ•°æ®èµ„äº§ã€‚
>
> **å°šæœªå®ç°ï¼š** è¿è¡Œæ—¶å‘å°„é€»è¾‘ã€æ£±é•œä¿®æ­£ç®¡çº¿ã€å…‰å¸†/ä¼´æ˜Ÿçš„è¿è¡Œæ—¶ IF-THEN é€»è¾‘ã€‚

åœ¨è¿™ä¸ªç³»ç»Ÿä¸­ï¼Œæ‰€æœ‰çš„é“å…·ç»Ÿç§°ä¸º **[æ˜Ÿè¾°ç¢ç‰‡]**ã€‚ä½†åœ¨åŠŸèƒ½ä¸Šï¼Œå®ƒä»¬å¿…é¡»è¢«ç¨‹åºè¯†åˆ«ä¸ºä»¥ä¸‹ **å››ç§äº’ä¸å…¼å®¹çš„ç±»å‹**ã€‚

### 2.1 ç±»å‹ Iï¼šæ˜Ÿæ ¸ (Star Core) â€”â€” å‘å°„æº `âœ… SO + è¿è¡Œæ—¶å·²å®Œæˆ`

- **åŠŸèƒ½å®šä¹‰**ï¼š**å‘å°„å™¨åŸå‹**ã€‚å†³å®š"å°„å‡ºçš„æ˜¯ä»€ä¹ˆ"ã€‚
- **æ•°æ®ç»“æ„**ï¼šç»§æ‰¿è‡ª `StarChartItemSO`ã€‚
- **å¿…éœ€å­—æ®µ**ï¼š`Prefab` (è¡¨ç°), `BaseStats` (æ•°å€¼), `FireRate`, `HeatCost`, `Family` **(æšä¸¾)**ã€‚

**ç»†åˆ†å®¶æ— (Core Families) & å®ç°é€»è¾‘ï¼š**


|                   |          |                                                   |          |          |
| ----------------- | -------- | ------------------------------------------------- | -------- | -------- |
| **å®¶æ— (Family)**   | **å…¸å‹ä»£è¡¨** | **ç¨‹åºå®ç°é€»è¾‘ (Implementation Hint)**                  | **å…³é”®æ‰‹æ„Ÿ** | **çŠ¶æ€** |
| **å®ç›¸ç³» (Matter)**  | ç‰©ç†å­å¼¹/é‡ç‚®  | **Rigidbody Projectile**: ç”Ÿæˆå®ä½“ï¼Œåº”ç”¨åŠ›/é€Ÿåº¦ï¼Œå¤„ç†ç‰©ç†ç¢°æ’ã€‚     | æ’å‡»æ„Ÿã€åååŠ›  | âœ… `Projectile.cs` |
| **å…‰è°±ç³» (Light)**   | æ¿€å…‰/æŠ˜å°„å…‰   | **Raycast / LineRenderer**: æ— é£è¡Œæ—¶é—´ï¼Œç¬é—´åˆ¤å®šã€‚éœ€å¤„ç†æŒç»­ç…§å°„é€»è¾‘ã€‚ | ç¬è¾¾ã€ç©¿é€    | âœ… `LaserBeam.cs` |
| **æ³¢åŠ¨ç³» (Echo)**    | å£°æ³¢/éœ‡è¡ç¯   | **Expansion Collider**: ç”Ÿæˆåä½“ç§¯éšæ—¶é—´è†¨èƒ€ï¼Œé€šå¸¸æ— è§†å¢™ä½“ï¼Œå¤šæ®µåˆ¤å®šã€‚   | AOEã€ç©¿å¢™   | âœ… `EchoWave.cs` |
| **å¼‚è±¡ç³» (Anomaly)** | æµ®æ¸¸é›·/å›æ—‹é•–  | **Custom Behavior**: å¸¦æœ‰ç‹¬ç«‹ AI æˆ–å¤æ‚è¿åŠ¨è½¨è¿¹ï¼ˆæ›²çº¿/æ‚¬åœï¼‰çš„å®ä½“ã€‚   | é™·é˜±ã€æœºåˆ¶    | âœ… `BoomerangModifier.cs` |


### 2.2 ç±»å‹ IIï¼šæ£±é•œ (Prism) â€”â€” ä¿®æ­£å™¨ `âœ… SO + è¿è¡Œæ—¶å·²å®Œæˆ`

- **åŠŸèƒ½å®šä¹‰**ï¼š**æ•°æ®ä¿®æ”¹å™¨**ã€‚å†³å®š"å­å¼¹å½¢æ€å¦‚ä½•æ”¹å˜"ã€‚
- **ç”Ÿæ•ˆé€»è¾‘ - å‚ç›´æ³¨å…¥ (Vertical Injection)**ï¼š
  - æ£±é•œä½äºæ˜Ÿæ ¸**ä¸Šæ–¹**ã€‚
  - æ£±é•œçš„æ•ˆæœä¼š**å¹³å‡åˆ†é… (Average Distribution)** ç»™åŒæ§½ä½ä¸‹æ–¹çš„æ‰€æœ‰æ˜Ÿæ ¸ã€‚
  - *å…¬å¼ç¤ºä¾‹*ï¼šå¦‚æœæ£±é•œæä¾› `+10 Damage`ï¼Œä¸‹æ–¹æœ‰ 2 ä¸ªæ˜Ÿæ ¸ï¼Œåˆ™æ¯ä¸ªæ˜Ÿæ ¸ `+5 Damage`ã€‚
- **æ•°æ®ç»“æ„**ï¼šç»§æ‰¿è‡ª `StarChartItemSO` (æŠ½è±¡ç±»)ã€‚

**ç»†åˆ†å®¶æ— (Prism Families) & ä¿®æ”¹é€»è¾‘ï¼š**


|                     |          |                                                                                              |          |
| ------------------- | -------- | -------------------------------------------------------------------------------------------- | -------- |
| **å®¶æ— (Family)**     | **å…¸å‹ä»£è¡¨** | **ä¿®æ”¹é€»è¾‘ (Modifier Logic)**                                                                    | **çŠ¶æ€** |
| **åˆ†å½¢æ£±é•œ (Fractal)**  | åˆ†è£‚/å¤šé‡/è¿å‘ | **ç”Ÿæˆè§„åˆ™ä¿®æ”¹**ï¼šä¿®æ”¹ `ProjectileCount` (æ•°é‡), `Spread` (æ•£å¸ƒ), æˆ–åœ¨å‘å°„æ—¶è§¦å‘ Coroutine (è¿å‘)ã€‚                 | âœ… å‡åŒ€æ‰‡å½¢æ•£å¸ƒå·²å®ç° |
| **æµå˜æ£±é•œ (Rheology)** | åŠ é€Ÿ/å·¨å¤§/åå¼¹ | **æ•°å€¼ä¸ç‰©ç†ä¿®æ”¹**ï¼šä¿®æ”¹ `Speed`, `Size`, æˆ–æ›¿æ¢ `PhysicsMaterial2D` (å¼¹åŠ›)ã€‚                                | âœ… `BounceModifier.cs` + ProjectileSize |
| **æ™•æŸ“æ£±é•œ (Tint)**     | æ¸©æŸ”/éœœå†»/ç‚¹ç‡ƒ | **ç»„ä»¶/çŠ¶æ€æ³¨å…¥**ï¼šç»™å­å¼¹ Prefab æŒ‚è½½é¢å¤–çš„ `MonoBehaviour` (å¦‚ `AnalysisEffect`, `SlowEffect`) æˆ–ä¿®æ”¹ `Color`ã€‚ | âœ… `SlowOnHitModifier.cs` (å ä½) |


### 2.3 ç±»å‹ IIIï¼šå…‰å¸† (Light Sail) â€”â€” é©¾é©¶é£æ ¼ (é‡ç‚¹æ›´æ–°) `âœ… è¿è¡Œæ—¶æ¡†æ¶å·²å®Œæˆ (Batch 3)`

- **åŠŸèƒ½å®šä¹‰**ï¼š**çŠ¶æ€è½¬åŒ–å™¨**ã€‚å®ƒä¸ç›´æ¥å‚ä¸å­å¼¹ç”Ÿæˆï¼Œè€Œæ˜¯ç›‘å¬**é£èˆ¹çš„è¿åŠ¨çŠ¶æ€**ï¼Œæ ¹æ®ç‰¹å®šæ“ä½œæä¾›æˆ˜æ–—å¢ç›Šã€‚å®ƒçš„å­˜åœ¨æ˜¯ä¸ºäº†å®šä¹‰ç©å®¶æµæ´¾ï¼ˆå†²åˆºæµã€è¿‘èº«æµã€æ“ä½œæµï¼‰ã€‚
- **æ§½ä½è§„åˆ™**ï¼š**å¼•æ“æ’æ§½**ï¼ˆå…¨æœºåªæœ‰ 1 ä¸ªï¼Œæå…¶çè´µï¼‰ã€‚
- **é€»è¾‘éœ€æ±‚**ï¼šç¨‹åºéœ€å®ç°ä¸€ä¸ª **[ç›‘å¬å™¨ -> è§¦å‘å™¨ -> æ‰§è¡Œå™¨]** çš„é€»è¾‘é—­ç¯ã€‚

**ç­–åˆ’éœ€æ±‚ç¤ºä¾‹ (éœ€æ”¯æŒä»¥ä¸‹é€»è¾‘)ï¼š**

1. **[å¤šæ™®å‹’æ•ˆåº”] (çŠ¶æ€ç›‘å¬)**ï¼š
  - *Condition*: å®æ—¶ç›‘å¬ `ShipMotor.CurrentSpeed`ã€‚
  - *Effect*: é€Ÿåº¦è¶Šå¿«ï¼Œå…¨å±€ä¼¤å®³åŠ æˆè¶Šé«˜ (Damage Multiplier)ã€‚
2. **[æ“¦å¼¹å¼•æ“] (äº‹ä»¶è§¦å‘)**ï¼š
  - *Condition*: ç›‘å¬ `OnGraze` äº‹ä»¶ï¼ˆæé™é—ªé¿åˆ¤å®šï¼‰ã€‚
  - *Effect*: ç«‹å³é‡ç½®å½“å‰æ­¦å™¨çš„å¼€ç«å†·å´ (Fire Rate Reset)ã€‚
3. **[æ­»äº¡åå°”å…¹] (å¤æ‚åŠ¨ä½œ)**ï¼š
  - *Condition*: æ£€æµ‹åˆ°é£èˆ¹åŸåœ°å¿«é€Ÿæ—‹è½¬ > 1080åº¦ (3åœˆ)ã€‚
  - *Effect*: è§¦å‘ä¸€æ¬¡å…¨å± AoE å¼¹å¹• (Trigger Special Action)ã€‚
4. **[é™é»˜æ½œèˆª] (çŠ¶æ€è®¡æ—¶)**ï¼š
  - *Condition*: `IsFiring == false` æŒç»­ 3.0ç§’ã€‚
  - *Effect*: è¿›å…¥éšå½¢çŠ¶æ€ï¼Œä¸”ä¸‹ä¸€æ¬¡æ”»å‡»å¿…å®šæš´å‡» (Buff Application)ã€‚

### 2.4 ç±»å‹ IVï¼šä¼´æ˜Ÿ (Satellite) â€”â€” è‡ªåŠ¨åŒ–æ¨¡ç»„ (é‡ç‚¹æ›´æ–°) `âœ… è¿è¡Œæ—¶æ¡†æ¶å·²å®Œæˆ (Batch 3)`

- **åŠŸèƒ½å®šä¹‰**ï¼š**äº‹ä»¶å“åº”å™¨ (Event Responder)**ã€‚å®ƒæ˜¯ä¸€å¥—ç‹¬ç«‹çš„è‡ªåŠ¨åŒ–é€»è¾‘ï¼Œæ‚¬æµ®åœ¨é£èˆ¹å‘¨å›´ï¼Œä¸å ç”¨ç©å®¶çš„ä¸»åŠ¨è¾“å…¥ã€‚
- **é€»è¾‘æ¨¡å¼**ï¼š**IF (Condition) THEN (Action)**ã€‚
- **å¿…éœ€æ•°æ®å­—æ®µ**ï¼š
  - **è§¦å‘æ¡ä»¶ (TriggerCondition)**ï¼šæšä¸¾æˆ–é€»è¾‘ç±»ï¼ˆå¦‚ï¼šæŠ¤ç›¾ç ´ç¢ã€æ‹¾å–èµ„æºã€ç‰¹å®šæŒ‰é”®æŒ‰ä¸‹ï¼‰ã€‚
  - **æ‰§è¡Œè¡Œä¸º (ResponseAction)**ï¼šæ‰§è¡Œçš„å…·ä½“é€»è¾‘ï¼ˆå¦‚ï¼šç”Ÿæˆå­å¼¹ã€ä¿®æ”¹æ•°å€¼ã€é‡ç½®çŠ¶æ€ï¼‰ã€‚
  - **å†…éƒ¨å†·å´ (InternalCooldown)**ï¼šé˜²æ­¢åŒä¸€å¸§å¤šæ¬¡è§¦å‘æˆ–æ— é™å¾ªç¯ï¼ˆå¦‚ï¼š0.5ç§’ï¼‰ã€‚

**ç­–åˆ’éœ€æ±‚ç¤ºä¾‹ (éœ€æ”¯æŒä»¥ä¸‹ IF-THEN é€»è¾‘)ï¼š**

1. **[å¤ä»‡ä¹‹æœˆ] (é˜²å¾¡åå‡»ç±»)**ï¼š
  - *IF Condition*: `OnShieldBroken` (æŠ¤ç›¾å€¼å½’é›¶äº‹ä»¶)ã€‚
  - *THEN Action*: `SpawnShockwave` (åœ¨é£èˆ¹ä½ç½®ç”Ÿæˆä¸€ä¸ªå‡»é€€åœˆ)ã€‚
2. **[æ¸…é“å¤«] (èµ„æºå¾ªç¯ç±»)**ï¼š
  - *IF Condition*: `OnResourcePickup` (æ‹¾å–åˆ°é‡‘å¸/æ‰è½ç‰©)ã€‚
  - *THEN Action*: `ResetHeat` (ç«‹å³å°†å½“å‰çƒ­é‡æ¸…é›¶)ã€‚
3. **[åŒå­åº§] (è”åŠ¨æ”»å‡»ç±»)**ï¼š
  - *IF Condition*: `OnSecondaryFire` (æ£€æµ‹åˆ°å³é”®å¼€ç«äº‹ä»¶)ã€‚
  - *THEN Action*: `FireBackwards` (è‡ªåŠ¨è°ƒç”¨å·¦é”®æ­¦å™¨ï¼Œä½†å¼ºåˆ¶å‘é£èˆ¹åæ–¹å‘å°„)ã€‚

---

## 3. æ˜Ÿå›¾ç»“æ„ä¸æ§½ä½é€»è¾‘ (Slot Architecture) â€” âœ… Batch 2 å·²å®Œæˆ

> **å·²å®ç°ï¼š** `SlotLayer<T>` æ³›å‹æ§½ä½ç®¡ç†ï¼ˆ3 æ ¼å®¹é‡ï¼Œè¿ç»­ç©ºé—´æŸ¥æ‰¾ï¼ŒSlotSize 1-3 æ”¯æŒï¼‰ã€‚`WeaponTrack` çº¯ C# ç±»æŒæœ‰åŒå±‚ï¼ˆCore + Prismï¼‰ã€‚åŒè½¨é“æ¶æ„ï¼šPrimaryï¼ˆå·¦é”®ï¼‰+ Secondaryï¼ˆå³é”®ï¼‰ç‹¬ç«‹å†·å´ã€‚`StarChartController` æ›¿ä»£ WeaponSystem ä½œä¸ºé¡¶å±‚ç¼–æ’å™¨ã€‚
>
> **å¾… Batch 4ï¼š** æ˜Ÿå›¾ UIï¼ˆæ ¼å­èƒŒåŒ…æ‹–æ‹½äº¤äº’ï¼‰ã€‚

### 3.1 è½¨é“å¸ƒå±€ï¼šä¸‰æ˜æ²»ç»“æ„ (The Sandwich Layout)

UI åŒ…å«ä¸¤æ¡ç‹¬ç«‹çš„**æ­¦å™¨è½¨é“**ï¼ˆä¸»æ˜Ÿè½¨/å·¦é”®ï¼Œå‰¯æ˜Ÿè½¨/å³é”®ï¼‰ã€‚æ¯æ¡è½¨é“éƒ½éµå¾ªä»¥ä¸‹**åŒå±‚æ¶æ„**ï¼š

Plaintext

```
[ ä¸Šå±‚ï¼šæ£±é•œæ§½ (Prism Slots) ]  <-- å®¹é‡ï¼š3 æ ¼ (Grid)
            || 
            || (æ•°æ®æµæ³¨å…¥)
            \/
[ ä¸‹å±‚ï¼šæ˜Ÿæ ¸æ§½ (Core Slots)  ]  <-- å®¹é‡ï¼š3 æ ¼ (Grid)

```

- **å®¹é‡é™åˆ¶**ï¼šä¸Šä¸‹å±‚å„è‡ªæ‹¥æœ‰ **3ä¸ªæ ‡å‡†å•ä½** çš„ç©ºé—´ã€‚
- **æ³¨å…¥è§„åˆ™**ï¼šä¸Šå±‚çš„æ‰€æœ‰æ£±é•œæ•ˆæœï¼Œä¼š**å¹³å‡åˆ†é…**ç»™ä¸‹å±‚çš„æ‰€æœ‰æ˜Ÿæ ¸ã€‚

### 3.2 ç©ºé—´ç®¡ç†ï¼šå¤§éƒ¨ä»¶ (Big Components)

ç¨‹åºéœ€å®ç° **"åŸºäºæ ¼å­çš„èƒŒåŒ…ç³»ç»Ÿ (Grid-based Inventory)"** é€»è¾‘ï¼š

- **æ ‡å‡†éƒ¨ä»¶**ï¼š`SlotSize = 1`ã€‚
- **é‡å‹éƒ¨ä»¶**ï¼š`SlotSize = 2` æˆ– `3`ã€‚
- **äº’æ–¥è§„åˆ™**ï¼š
  - å¦‚æœç©å®¶è£…å¤‡äº†ä¸€ä¸ª [æ­»æ˜Ÿä¸»ç‚®] (Size=3)ï¼Œåˆ™ä¸‹å±‚æ§½ä½è¢«å¡«æ»¡ï¼Œæ— æ³•å†è£…å¤‡å…¶ä»–æ˜Ÿæ ¸ã€‚
  - å¦‚æœç©å®¶è£…å¤‡äº† [å°å‹æ¿€å…‰] (Size=1)ï¼Œåˆ™è¿˜å‰© 2 æ ¼ç©ºé—´ï¼Œå¯ä»¥å†è£… 2 ä¸ªå°éƒ¨ä»¶ï¼Œæˆ–è€… 1 ä¸ªä¸­å‹éƒ¨ä»¶ (Size=2)ã€‚
- **UI è¡¨ç°éœ€æ±‚**ï¼šæ‹–æ‹½å¤§éƒ¨ä»¶æ—¶ï¼Œéœ€é«˜äº®æ˜¾ç¤ºå…¶å ç”¨çš„æ‰€æœ‰æ ¼å­ã€‚

### 3.3 å‘å°„é€»è¾‘ï¼šé½å°„ (Alpha Strike)

å½“ç©å®¶æŒ‰ä¸‹å¼€ç«é”®æ—¶ï¼Œç³»ç»Ÿæ‰§è¡Œä»¥ä¸‹ **"é½å°„"** é€»è¾‘ï¼š

1. **è¾“å…¥å“åº”**ï¼šæ£€æµ‹åˆ°å·¦é”®æŒ‰ä¸‹ã€‚
2. **éå†ä¸‹å±‚**ï¼šè·å–ä¸‹å±‚æ§½ä½ä¸­æ‰€æœ‰å·²è£…å¤‡çš„ **æ˜Ÿæ ¸ (Star Core)**ã€‚
  - *æ³¨æ„ï¼šæ˜¯æ‰€æœ‰"å®ä¾‹"ã€‚å¦‚æœè£…äº† 3 ä¸ªå°æ¿€å…‰ï¼Œå°±æ˜¯ 3 ä¸ªå‘å°„æºã€‚*
3. **è®¡ç®—ä¿®æ­£**ï¼š
  - è·å–ä¸Šå±‚æ‰€æœ‰ **æ£±é•œ (Prism)**ã€‚
  - å°†æ£±é•œå‚æ•°åº”ç”¨åˆ°æ¯ä¸€ä¸ªæ˜Ÿæ ¸çš„æ•°æ®å‰¯æœ¬ä¸Šã€‚
4. **åŒæ—¶æ‰§è¡Œ (Simultaneous Execution)**ï¼š
  - **æ‰€æœ‰æ˜Ÿæ ¸åœ¨åŒä¸€å¸§æ‰§è¡Œ Fire()**ã€‚
  - *ç»“æœ*ï¼šé£èˆ¹çœ‹èµ·æ¥åƒæ˜¯æ‹¥æœ‰å¤šä¸ªç‚®å¡”/ç‚®å£åŒæ—¶å¼€ç«ã€‚
  - *çƒ­é‡è®¡ç®—*ï¼š`TotalHeat = Sum(Core.Heat) + Sum(Prism.Heat)`ã€‚

---

## **4. èµ„æºå¾ªç¯ï¼šçƒ­é‡ (Entropy/Heat)** â€” âœ… Batch 1 å·²å®Œæˆ

> **å·²å®ç°ï¼š**
> - `HeatStatsSO`ï¼šå¯é…ç½®çš„çƒ­é‡å‚æ•°ï¼ˆæœ€å¤§çƒ­é‡ã€æ•£çƒ­é€Ÿç‡ã€è¿‡çƒ­æ—¶é•¿ã€è¿‡çƒ­é˜ˆå€¼ï¼‰
> - `HeatSystem`ï¼šå®Œæ•´çš„çƒ­é‡è¿è¡Œæ—¶ï¼ˆçŠ¶æ€æœº Normalâ†”Overheatedã€è¢«åŠ¨æ•£çƒ­ã€è¿‡çƒ­æƒ©ç½šè®¡æ—¶ï¼‰
> - `WeaponSystem` é›†æˆï¼šå¼€ç«æ¶ˆè€—çƒ­é‡ï¼Œè¿‡çƒ­æ—¶åœç«ï¼ˆHeatSystem ä¸ºå¯é€‰ä¾èµ–ï¼Œnull = æ— é™å¼€ç«ï¼‰
> - äº‹ä»¶ï¼š`OnHeatChanged(float)`ã€`OnOverheated`ã€`OnCooldownComplete`
>
> **å¾… Unity ç¼–è¾‘å™¨æ“ä½œï¼š** åˆ›å»º `_Data/Heat/DefaultHeatStats.asset`ï¼ŒShip Prefab ä¸ŠæŒ‚è½½ HeatSystem ç»„ä»¶å¹¶è¿çº¿ã€‚

ä¸ºäº†é™åˆ¶æ— é™å †å ï¼Œæˆ‘ä»¬ä½¿ç”¨**"è¿‡çƒ­æœºåˆ¶"**æ›¿ä»£"é­”æ³•å€¼"ã€‚

### **4.1 æ ¸å¿ƒå…¬å¼**

- **äº§çƒ­ (Heat Gen)ï¼š** æ¯ä¸ªéƒ¨ä»¶éƒ½æœ‰äº§çƒ­å€¼ã€‚æ˜Ÿæ ¸è¶Šé«˜ä¼¤è¶Šçƒ­ï¼Œæ£±é•œè¶Šå¤æ‚è¶Šçƒ­ã€‚
  - `å•æ¬¡å°„å‡»äº§çƒ­ = Î£(æ˜Ÿæ ¸äº§çƒ­) + Î£(æ£±é•œäº§çƒ­)`
- **æ•£çƒ­ (Cooling)ï¼š** é£èˆ¹æ¯ç§’è‡ªåŠ¨å‡å°‘å›ºå®šçƒ­é‡ã€‚
  - `å°„å‡»é—´éš” = å•æ¬¡å°„å‡»äº§çƒ­ / é£èˆ¹æ•£çƒ­é€Ÿåº¦`

### **4.2 ç©å®¶ä½“éªŒ**

- **é‡ç‚®æµï¼š** äº§çƒ­æé«˜ -> å°„å‡»é—´éš”é•¿ï¼ˆ2ç§’ä¸€å‘ï¼‰ -> éœ€è¦ç²¾å‡†ç„å‡†ã€‚
- **æœºæªæµï¼š** äº§çƒ­æä½ -> å°„å‡»é—´éš”çŸ­ï¼ˆ0.1ç§’ä¸€å‘ï¼‰ -> å¯ä»¥æŒ‰ä½ä¸æ”¾ã€‚
- **æƒ©ç½šï¼š** è‹¥çƒ­é‡æ¡çˆ†è¡¨ï¼ˆOverheatï¼‰ï¼Œé£èˆ¹è¿›å…¥**"é™é»˜å†·å´"**çŠ¶æ€ï¼Œ3ç§’å†…æ— æ³•æ”»å‡»ï¼Œä¸”å…‰å¸†å¤±æ•ˆï¼ˆæ— æ³•å†²åˆºï¼‰ï¼Œæåº¦å±é™©ã€‚

## 5. è¿è¡Œæ—¶å‘å°„æµç¨‹ (Runtime Firing Pipeline) â€” âœ… Batch 2 å·²å®Œæˆ

å½“ç©å®¶æŒ‰ä¸‹å¼€ç«é”®ï¼ˆå¦‚å·¦é”®ï¼‰æ—¶ï¼Œç³»ç»Ÿåº”ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å¤„ç†ï¼š

**Step 1: çƒ­é‡æ£€æŸ¥ (Heat Check)** âœ…

- æ£€æŸ¥å½“å‰é£èˆ¹çŠ¶æ€æ˜¯å¦ä¸º **[é™é»˜/è¿‡çƒ­]**ã€‚å¦‚æœæ˜¯ï¼Œæ‹’ç»å¼€ç«ã€‚ âœ… `HeatSystem.CanFire()`
- æ£€æŸ¥å½“å‰æ­¦å™¨æ˜¯å¦å¤„äº **[å°„é€Ÿå†·å´]** ä¸­ã€‚å¦‚æœæ˜¯ï¼Œæ‹’ç»å¼€ç«ã€‚ âœ… `WeaponSystem._fireCooldownTimer`

**Step 2: æ•°æ®å¿«ç…§ (Snapshot)** âœ…

- ä»å½“å‰æ˜Ÿè½¨çš„**ä¸‹å±‚**è·å–æ‰€æœ‰ **æ˜Ÿæ ¸** çš„åŸå§‹æ•°æ®ã€‚ âœ… `WeaponTrack.CoreLayer`
- ä»å½“å‰æ˜Ÿè½¨çš„**ä¸Šå±‚**è·å–æ‰€æœ‰ **æ£±é•œ** çš„ä¿®æ”¹æŒ‡ä»¤ã€‚ âœ… `WeaponTrack.PrismLayer`

**Step 3: ç®¡é“åŠ å·¥ (Processing)** âœ… `SnapshotBuilder.Build()`

- å°†æ£±é•œçš„æŒ‡ä»¤åº”ç”¨åˆ°æ¯ä¸€ä¸ªæ˜Ÿæ ¸çš„æ•°æ®åŒ…ä¸Šã€‚
- *ç¤ºä¾‹*ï¼šå¦‚æœä¸Šå±‚æœ‰"åˆ†è£‚(+2)"ï¼Œä¸‹å±‚æœ‰"æ¿€å…‰"å’Œ"å¯¼å¼¹"ã€‚é‚£ä¹ˆæ•°æ®åŒ…å˜ä¸ºï¼š(3å‘æ¿€å…‰) + (3å‘å¯¼å¼¹)ã€‚

**Step 4: å®ä¾‹åŒ–ä¸åˆå§‹åŒ– (Spawn & Init)**

- è°ƒç”¨ **å¯¹è±¡æ± **ï¼Œæ ¹æ®æœ€ç»ˆæ•°æ®ç”Ÿæˆå­å¼¹ã€‚
- è®¾ç½®å­å¼¹çš„ä½ç½®ã€æ—‹è½¬ã€é€Ÿåº¦ã€ä¼¤å®³ã€‚
- å¦‚æœæ˜¯ç‰¹æ®Šæ£±é•œï¼ˆå¦‚è¿½è¸ªï¼‰ï¼Œåœ¨æ­¤æ­¥éª¤å°†è¿½è¸ªç»„ä»¶ `Enable` å¹¶èµ‹å€¼ã€‚

**Step 4: å®ä¾‹åŒ–ä¸åˆå§‹åŒ– (Spawn & Init)** âœ… `StarChartController.SpawnProjectile()` â€” Batch 5 å·²é‡æ„ä¸º switch(CoreFamily) å®¶æ—åˆ†å‘

**Step 5: ç»“ç®—ä¸åé¦ˆ (Cost & Feedback)** âœ… `StarChartController.ExecuteFire()`

- è®¡ç®—æ€»äº§çƒ­å€¼ï¼ŒåŠ åˆ°é£èˆ¹çš„çƒ­é‡æ§½ä¸­ã€‚ âœ…
- æ£€æµ‹æ˜¯å¦è¾¾åˆ°æœ€å¤§çƒ­é‡ -> è§¦å‘è¿‡çƒ­çŠ¶æ€ã€‚ âœ…
- æ’­æ”¾å‘å°„éŸ³æ•ˆã€å±å¹•éœ‡åŠ¨ã€‚ âœ… éŸ³æ•ˆå·²å®ç°ï¼Œå±å¹•éœ‡åŠ¨å¾…åç»­

---

## 5. ç‰¹æ®Šè¾¹ç•Œæƒ…å†µå¤„ç† (Edge Cases) â€” âœ… æ•°æ®å±‚å·²å¤„ç†ï¼ŒUI å±‚å¾… Batch 4

ç¨‹åºåœ¨å®ç°æ—¶éœ€è€ƒè™‘ä»¥ä¸‹æç«¯æƒ…å†µï¼š

1. **ç©ºæ§½ä½**ï¼š
  - å¦‚æœä¸‹å±‚æ²¡æœ‰æ˜Ÿæ ¸ï¼Œç‚¹å‡»æ— æ•ˆã€‚
  - å¦‚æœä¸Šå±‚æ²¡æœ‰æ£±é•œï¼Œæ˜Ÿæ ¸å‘å°„åŸå§‹å­å¼¹ã€‚
2. **å¤§ä½“ç§¯å†²çª**ï¼š
  - UI äº¤äº’å±‚éœ€è¦é˜»æ­¢ç©å®¶æŠŠä¸€ä¸ª 2æ ¼çš„ç‰©å“å¡è¿›åªå‰© 1æ ¼ çš„ç©ºé—´é‡Œã€‚
  - æ•°æ®å±‚éœ€è¦è¯†åˆ«"å äº†2ä¸ªæ ¼å­çš„ç‰©ä½“å…¶å®æ˜¯åŒä¸€ä¸ªå®ä¾‹"ï¼Œä¸è¦é‡å¤è®¡ç®—ä¸¤æ¬¡ã€‚
3. **é€»è¾‘æ­»å¾ªç¯**ï¼š
  - æ¯”å¦‚"åˆ†è£‚"æ£±é•œå†æ¬¡è§¦å‘äº†"åˆ†è£‚"ã€‚
  - **éœ€æ±‚**ï¼šæ£±é•œçš„ä¿®æ”¹åªå‘ç”Ÿä¸€æ¬¡ï¼Œä¸æ”¯æŒé€’å½’ä¿®æ”¹ã€‚
4. **æ€§èƒ½ä¿æŠ¤**ï¼š
  - å¦‚æœç©å®¶å †å å‡ºäº†"å•æ¬¡å‘å°„ 100 é¢—å­å¼¹"ï¼Œç³»ç»Ÿéœ€è¦æœ‰ä¸€ä¸ª **[åˆå¹¶æ¸²æŸ“]** æˆ– **[ç¡¬ä¸Šé™]** çš„å…œåº•é€»è¾‘ã€‚ä¾‹å¦‚ï¼šå¼ºåˆ¶é™åˆ¶å•æ¬¡å‘å°„ä¸Šé™ä¸º 20ï¼Œå¤šä½™çš„è½¬åŒ–ä¸ºä¼¤å®³åŠ æˆã€‚

---

## 6. æ€»ç»“ (Summary)

**ç»™ç¨‹åºçš„"äººè¯"æ€»ç»“ï¼š**

æˆ‘ä»¬è¦åšçš„ä¸æ˜¯ä¸€æŠŠæªï¼Œè€Œæ˜¯ä¸€ä¸ª**"å‡½æ•°è®¡ç®—å™¨"**ã€‚

- **è¾“å…¥ï¼š** åŸºç¡€å‚æ•° (Core)
- **å‡½æ•°ï¼š** ä¿®æ”¹é€»è¾‘ (Prism)
- **è¾“å‡ºï¼š** ä¹Ÿå°±æ˜¯ `f(x)`ï¼Œç”Ÿæˆæœ€ç»ˆçš„å­å¼¹ã€‚

# ğŸ¨ äº¤äº’è§„èŒƒï¼šæ˜Ÿå›¾ç•Œé¢çš„"å¾®è§‚èšç„¦" (The Microscopic Focus IxD)
æ–‡æ¡£ç‰ˆæœ¬ï¼šv1.0 æ ¸å¿ƒä½“éªŒï¼šæ½œå…¥æ·±æµ·èˆ¬çš„ä¸“æ³¨æ„Ÿã€‚ çŠ¶æ€å®šä¹‰ï¼š
- Combat State (æˆ˜æ–—æ€)ï¼šæ—¶é—´æµé€Ÿ 1.0ï¼Œé•œå¤´è¿œï¼ŒUI ä¸º HUD æ¨¡å¼ã€‚
- Weaving State (ç¼–ç»‡æ€)ï¼šæ—¶é—´æµé€Ÿ 0.0ï¼Œé•œå¤´å¾®è·ï¼ŒUI ä¸º ç©ºé—´æŠ•å½±æ¨¡å¼ã€‚

### å®ç°é˜¶æ®µæ€»è§ˆ

> æœ¬è§„èŒƒæè¿°çš„æ˜¯æ¸¸æˆ**å®Œæˆå½¢æ€**ã€‚åŸºäºå½“å‰é¡¹ç›®è¿›åº¦ï¼ˆæ—  Tween åº“ã€æ—  AudioMixerã€æ— é£èˆ¹è‡ªå®šä¹‰ Shaderï¼‰ï¼ŒåŠŸèƒ½å·²åˆ’åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š
> - ğŸŸ¢ **ç°é˜¶æ®µ**ï¼šå¯ç”¨ç°æœ‰åŸºç¡€è®¾æ–½å®ç°ï¼ˆåç¨‹ + AnimationCurve + URP Volumeï¼‰
> - ğŸ”´ **æœªæ¥**ï¼šéœ€è¦æ–°å¢åŸºç¡€è®¾æ–½ï¼ˆDOTweenã€AudioMixerã€Shader Graph è‡ªå®šä¹‰æè´¨ã€ç¾æœ¯èµ„æºï¼‰
> - âœ… **å·²å®Œæˆ**ï¼šå·²åœ¨ä¹‹å‰çš„ Batch ä¸­å®ç°

---
## 1. è¿›å…¥æµç¨‹ (The Entry Sequence)
å½“ç©å®¶æŒ‰ä¸‹ TAB é”®æ—¶ï¼Œæ‰§è¡Œä»¥ä¸‹ 0.35ç§’ çš„è¿‡æ¸¡åºåˆ—ã€‚æ‰€æœ‰æ•ˆæœéœ€ä½¿ç”¨ EaseOutCubic æ›²çº¿ï¼Œç¡®ä¿"å¿«é€Ÿå¯åŠ¨ï¼Œå¹³æ»‘åˆ¹è½¦"ã€‚

### 1.1 é•œå¤´è¿åŠ¨ (Camera Work) â€” ğŸŸ¢ ç°é˜¶æ®µï¼ˆç®€åŒ–ç‰ˆï¼‰
> **ç°é˜¶æ®µå®ç°æ–¹å¼**ï¼š2D æ­£äº¤ç›¸æœºé€šè¿‡åç¨‹æ’å€¼ `orthographicSize`ï¼ˆå¤§å€¼=æˆ˜æ–—è¿œæ™¯ï¼Œå°å€¼=ç¼–ç»‡å¾®è·ï¼‰ï¼Œé…åˆ `AnimationCurve` çš„ EaseOutCubic æ›²çº¿ã€‚ä½¿ç”¨ `Time.unscaledDeltaTime` é©±åŠ¨ã€‚

- æ¨æ‹‰ (Dolly In)ï¼šæ‘„åƒæœºä»å½“å‰çš„æˆ˜æ–—é«˜åº¦ï¼ˆå‡è®¾ Height=15ï¼‰è¿…é€Ÿä¸‹é™è‡³å¾®è·é«˜åº¦ï¼ˆHeight=4ï¼‰ã€‚
- è§†åœºè§’ (FOV)ï¼šåŒæ—¶å°† FOV ä» 60Â° ç¼©çª„è‡³ 40Â°ï¼Œäº§ç”Ÿä¸€ç§"èšç²¾ä¼šç¥"çš„è§†è§‰å‹ç¼©æ„Ÿã€‚
  - *æ³¨ï¼š2D æ­£äº¤ç›¸æœºæ—  FOV æ¦‚å¿µï¼Œä¸ orthographicSize åˆå¹¶å¤„ç†ã€‚*
- ç›®æ ‡ç‚¹ (Target)ï¼šé•œå¤´ä¸­å¿ƒæ­»æ­»é”å®šé£èˆ¹çš„ç‰©ç†ä¸­å¿ƒã€‚

### 1.2 ç”»é¢åå¤„ç† (Post-Processing)
è¿™æ˜¯è¥é€ "å¾®è§‚æ„Ÿ"çš„å…³é”®ã€‚
- æ™¯æ·± (Depth of Field)ï¼š â€” ğŸŸ¢ ç°é˜¶æ®µ
  > **ç°é˜¶æ®µå®ç°æ–¹å¼**ï¼šä»£ç è·å– URP Volume ä¸­çš„ DoF Overrideï¼Œåˆ‡æ¢ active + è®¾ç½®å‚æ•°ã€‚
  - FocusDistanceï¼šé”å®šåœ¨é£èˆ¹æ¨¡å‹ä¸Šã€‚
  - FocalLengthï¼šç¬é—´æ‹‰å¤§ã€‚
  - æ•ˆæœï¼šèƒŒæ™¯ä¸­çš„æ•Œäººã€å­å¼¹ã€åœ°å½¢ç¬é—´å˜å¾—æåº¦æ¨¡ç³Šï¼ˆBokeh æ•ˆæœï¼‰ï¼Œåªå‰©ä¸‹é£èˆ¹æ¸…æ™°å¯è§ã€‚
- æš—è§’ (Vignette)ï¼šå¼ºåº¦ä» 0.1 å¢åŠ åˆ° 0.5ï¼Œå‹æš—å±å¹•å››è§’ï¼Œå¼•å¯¼è§†çº¿èšç„¦ä¸­å¿ƒã€‚ â€” ğŸŸ¢ ç°é˜¶æ®µ
  > **ç°é˜¶æ®µå®ç°æ–¹å¼**ï¼šä»£ç æ§åˆ¶ URP Vignette Override çš„ intensity å‚æ•°å¹³æ»‘è¿‡æ¸¡ã€‚
- è‰²å·® (Chromatic Aberration)ï¼šåœ¨åˆ‡æ¢ç¬é—´ç»™ä¸€ä¸ªçŸ­ä¿ƒçš„è„‰å†²ï¼ˆ0 -> 1.0 -> 0ï¼‰ï¼Œæ¨¡æ‹Ÿé•œå¤´æé€Ÿå˜ç„¦äº§ç”Ÿçš„ç‰©ç†ç‘•ç–µã€‚ â€” ğŸ”´ æœªæ¥
  > **æ¨è¿ŸåŸå› **ï¼šé”¦ä¸Šæ·»èŠ±æ•ˆæœï¼Œä¼˜å…ˆçº§ä½ã€‚éœ€ç¡®è®¤å½“å‰ Volume Profile æ˜¯å¦å«æ­¤ Overrideã€‚

### 1.3 é£èˆ¹å½¢æ€è½¬åŒ– (Ship Metamorphosis) â€” ğŸ”´ æœªæ¥ï¼ˆæ•´ä½“æ¨è¿Ÿï¼‰
> **æ¨è¿ŸåŸå› **ï¼šå½“å‰é£èˆ¹ä¸º 2D Spriteï¼Œä¸å­˜åœ¨"è£…ç”²æ¿"æ¦‚å¿µã€‚éœ€è¦ Shader Graph å…¨æ–°åˆ¶ä½œå…¨æ¯çº¿æ¡†æè´¨ + é£èˆ¹åˆ†å±‚ç¾æœ¯èµ„æºã€‚
> **å‰ç½®ä¾èµ–**ï¼šShader Graph å…¨æ¯æè´¨åˆ¶ä½œ + é£èˆ¹ç¾æœ¯é‡åˆ¶/åˆ†å±‚

é£èˆ¹ä¸èƒ½æ˜¯ä¸ªæ­»ç‰©ï¼Œå®ƒå¿…é¡»"æ‰“å¼€"ä»¥æ¥å—æ”¹è£…ã€‚
- æè´¨åˆ‡æ¢ï¼šé£èˆ¹æ¨¡å‹ä»"PBR å®ä½“æè´¨"æ¸å˜ä¸º "åŠé€æ˜æ™¶ä½“çº¿æ¡† (Holographic Wireframe)"ã€‚
  - ç›®çš„ï¼šè®©ç©å®¶èƒ½çœ‹æ¸…å†…éƒ¨ç»“æ„ï¼Œä¸”ä¸é®æŒ¡åº•å±‚çš„ UI æ§½ä½ã€‚
- åŠ¨ç”»ï¼šé£èˆ¹è£…ç”²æ¿å¾®å¾®å±•å¼€ï¼ˆåƒç”²å£³è™«å¼ å¼€ç¿…è†€ï¼‰ï¼Œéœ²å‡ºå†…éƒ¨å‘å…‰çš„æ˜Ÿæ ¸æ§½ä½ã€‚

### 1.4 UI å±•å¼€ (UI Unfolding) â€” ğŸ”´ æœªæ¥ï¼ˆæ•´ä½“æ¨è¿Ÿï¼‰
> **æ¨è¿ŸåŸå› **ï¼šéœ€è¦ Tween åº“ï¼ˆDOTween/PrimeTweenï¼‰+ UI æ¶æ„æ”¹é€ ï¼ˆä¸–ç•Œç©ºé—´ Canvas æˆ–é”šç‚¹åŠ¨ç”»ç³»ç»Ÿï¼‰ã€‚
> **å‰ç½®ä¾èµ–**ï¼šDOTween/PrimeTween å®‰è£…
> **ç°é˜¶æ®µæ›¿ä»£**ï¼šé¢æ¿ç›´æ¥ SetActive(true) æ˜¾ç¤ºï¼Œæ— åŠ¨ç”»ã€‚

UI ä¸æ˜¯æ·¡å…¥ (Fade In)ï¼Œè€Œæ˜¯ç”Ÿé•¿ (Grow)ã€‚
- åŸç‚¹ï¼šæ‰€æœ‰ UI å…ƒç´ éƒ½ä»¥é£èˆ¹ä¸ºä¸­å¿ƒç‚¹ã€‚
- åŠ¨ç”»ï¼š
  - Phase 1 (0.0s - 0.1s)ï¼šæ˜Ÿæ ¸æ§½ä½ï¼ˆCore Slotsï¼‰ä»é£èˆ¹ä¸­å¿ƒå‘å¤–å¼¹å°„ã€‚
  - Phase 2 (0.1s - 0.2s)ï¼šæ£±é•œæ§½ä½ï¼ˆPrism Slotsï¼‰è·Ÿéšæ˜Ÿæ ¸æ§½ä½æµ®ç°ã€‚
  - Phase 3 (0.2s - 0.3s)ï¼šå¤–ç¯çš„ä¼´æ˜Ÿè½¨é“å’ŒèƒŒåŒ…åˆ—è¡¨æ—‹å…¥å±å¹•ã€‚

---
## 2. ç¼–ç»‡æ€ä½“éªŒ (The Weaving State)
è¿›å…¥ç•Œé¢åï¼Œç©å®¶å¤„äº"æš‚åœ"çŠ¶æ€ã€‚

### 2.1 è§†è§‰æ°›å›´
- èƒŒæ™¯å†»ç»“ï¼šæˆ˜åœºï¼ˆæ•Œäºº/å­å¼¹ï¼‰è™½ç„¶æ¨¡ç³Šäº†ï¼Œä½†ä¾ç„¶åœç•™åœ¨åŸåœ°ã€‚è¿™ç§"å­å¼¹åœåœ¨åŠç©º"çš„å‹è¿«æ„Ÿèƒ½æé†’ç©å®¶ï¼š"ä½ æ­£åœ¨æˆ˜åœºä¸­å¿ƒä¿®é£èˆ¹"ã€‚ â€” âœ… å·²å®Œæˆï¼ˆTimeScale=0ï¼‰
- å¾®åŠ¨æ•ˆ (Micro-movements)ï¼š
  - æ˜Ÿå›¾ UI ä¼šè·Ÿéšé¼ æ ‡ä½ç½®æœ‰è½»å¾®çš„ è§†å·® (Parallax) ç§»åŠ¨ï¼Œå¢åŠ  3D æ‚¬æµ®æ„Ÿã€‚ â€” ğŸŸ¢ ç°é˜¶æ®µ
    > **ç°é˜¶æ®µå®ç°æ–¹å¼**ï¼šç®€å•è„šæœ¬è¯»å–é¼ æ ‡/å³æ‘‡æ†åç§»ï¼Œå¯¹é¢æ¿æ ¹èŠ‚ç‚¹åº”ç”¨ Â±15px åå‘ä½ç§»ã€‚
  - è¿æ¥çº¿ï¼ˆå…‰è·¯ï¼‰æœ‰æŒç»­æµåŠ¨çš„å…‰æ•ˆã€‚ â€” ğŸ”´ æœªæ¥
    > **æ¨è¿ŸåŸå› **ï¼šéœ€è¦ UI Shader æˆ–ç²’å­ç³»ç»Ÿ + ç¾æœ¯è®¾è®¡ã€‚

### 2.2 å¬è§‰æ°›å›´ (Audioscape) â€” ğŸ”´ æœªæ¥ï¼ˆæ•´ä½“æ¨è¿Ÿï¼Œéœ€ AudioMixer åŸºç¡€å»ºè®¾ï¼‰
> **æ¨è¿ŸåŸå› **ï¼šä½é€šæ»¤æ³¢ã€éŸ³é¢‘åˆ†ç»„å‡éœ€ AudioMixer èµ„äº§å’Œ Group æ¶æ„ã€‚å½“å‰æ—  AudioMixerã€‚
> **å‰ç½®ä¾èµ–**ï¼šAudioMixer åˆ›å»º + Master/UI Group åˆ’åˆ† + éŸ³æ•ˆç´ æé‡‡è´­
> **ç°é˜¶æ®µæ›¿ä»£**ï¼šä»…æ·»åŠ å¼€/å…³é¢æ¿çš„ç®€å•å ä½éŸ³æ•ˆï¼ˆéœ€æ±‚ 4ï¼‰ã€‚

- ä½é€šæ»¤æ³¢ (Low-pass Filter)ï¼š
  - è¿›å…¥ç¬é—´ï¼Œæ‰€æœ‰æˆ˜æ–—éŸ³æ•ˆï¼ˆBGMã€æªå£°ï¼‰ç»è¿‡ä¸€ä¸ª 800Hz çš„ä½é€šæ»¤æ³¢å™¨ã€‚
  - å¬æ„Ÿï¼šåƒæ˜¯ä¸€å¤´æ‰è¿›äº†æ°´é‡Œï¼Œå¤–ç•Œçš„å£°éŸ³å˜å¾—é—·é—·çš„ã€‚
- ç¯å¢ƒéŸ³ (Ambience)ï¼š
  - æ’­æ”¾ä¸€å±‚å®‰é™çš„"ç²¾å¯†ä»ªå™¨è¿è½¬å£°"æˆ–"æ™¶ä½“å—¡å—¡å£°" (Crystal Hum)ã€‚
- æ“ä½œéŸ³ï¼š
  - æ‰€æœ‰çš„ç‚¹å‡»ã€æ‹–æ‹½éŸ³æ•ˆå¿…é¡»ä¸ç»è¿‡æ»¤æ³¢å™¨ï¼Œä¿æŒæ¸…è„†ã€é«˜äº®ï¼Œå½¢æˆå¬è§‰ä¸Šçš„"å‰æ™¯"ä¸"èƒŒæ™¯"åˆ†ç¦»ã€‚

---
## 3. é€€å‡ºæµç¨‹ (The Exit Sequence)
å½“ç©å®¶æŒ‰ä¸‹ TAB æˆ– ESC æ—¶ï¼Œæ‰§è¡Œ 0.25ç§’ çš„å¿«é€Ÿé€€å‡ºã€‚
1. é•œå¤´å¼¹å›ï¼šè¿…é€Ÿæ‹‰å›æˆ˜æ–—é«˜åº¦ã€‚ â€” ğŸŸ¢ ç°é˜¶æ®µï¼ˆè¿›å…¥æµç¨‹çš„é€†å‘åç¨‹ï¼‰
2. æè´¨è¿˜åŸï¼šé£èˆ¹çº¿æ¡†ç¬é—´å®ä½“åŒ–ï¼Œè£…ç”²é—­åˆï¼ˆä¼´éš Clank çš„é—­åˆå£°ï¼‰ã€‚ â€” ğŸ”´ æœªæ¥ï¼ˆä¾èµ–é£èˆ¹ Shaderï¼‰
3. UI æ”¶ç¼©ï¼šæ‰€æœ‰ UI å…ƒç´ å‘ä¸­å¿ƒåç¼©å¹¶æ¶ˆå¤±ã€‚ â€” ğŸ”´ æœªæ¥ï¼ˆä¾èµ– Tween åº“ï¼‰
4. éŸ³æ•ˆé‡Šæ”¾ï¼šä½é€šæ»¤æ³¢å™¨ç§»é™¤ï¼Œæˆ˜åœºçš„å–§åš£å£°ï¼ˆBGM é«˜æ½®ï¼‰ç¬é—´å›å½’ã€‚ â€” ğŸ”´ æœªæ¥ï¼ˆä¾èµ– AudioMixerï¼‰
  - ä¼´éšéŸ³æ•ˆï¼šæ°”é˜€é‡Šæ”¾å£° (Psssshh) æˆ– èƒ½é‡å……èƒ½å®Œæ¯•å£° (Vroooom)ã€‚ â€” ğŸ”´ æœªæ¥ï¼ˆéœ€éŸ³æ•ˆç´ æï¼‰

---
## 4. ç»™æŠ€æœ¯ç¾æœ¯ (Tech Art) çš„å®ç°æ¸…å•
è¯·å°†æ­¤æ¸…å•å‘ç»™è´Ÿè´£ Unity æ•ˆæœå®ç°çš„ç¨‹åºï¼š
1. DoTween / PrimeTweenï¼šç”¨äºæ§åˆ¶ Camera Size, PostProcessing Weight çš„æ’å€¼æ›²çº¿ã€‚ â€” ğŸŸ¢ ç°é˜¶æ®µç”¨åç¨‹ + AnimationCurve æ›¿ä»£
2. Shader Graphï¼šåˆ¶ä½œä¸€ä¸ªæ”¯æŒ Lerp(Solid, Hologram) çš„é£èˆ¹ Shaderã€‚ â€” ğŸ”´ æœªæ¥
  - éœ€è¦å‚æ•°ï¼šHologramIntensity (æ§åˆ¶é€æ˜åº¦å’Œç½‘æ ¼äº®åº¦)ã€‚
  - éœ€è¦å‚æ•°ï¼šExpansion (æ§åˆ¶è£…ç”²æ¿é¡¶ç‚¹çš„ä¸–ç•Œåæ ‡åç§»ï¼Œåšå±•å¼€åŠ¨ç”»)ã€‚
3. Audio Mixerï¼šè®¾ç½®ä¸¤ä¸ª Groupï¼šMaster å’Œ UIã€‚ â€” ğŸ”´ æœªæ¥
  - Master ç»„æŒ‚è½½ Lowpass Filterã€‚
  - åœ¨è¿›å…¥æ˜Ÿå›¾æ—¶ï¼Œä»£ç æ§åˆ¶ Cutoff Frequency ä» 22000 é™è‡³ 800ã€‚
4. Time Scaleï¼š â€” âœ… å·²å®Œæˆ
  - è¿›å…¥æ—¶ï¼šTime.timeScale = 0 (å®Œå…¨æš‚åœ)ã€‚
  - æ³¨æ„ï¼šUI åŠ¨ç”»å’Œ Shader åŠ¨ç”»å¿…é¡»ä½¿ç”¨ UnscaledTimeï¼Œå¦åˆ™åŠ¨ç”»ä¹Ÿä¼šè¢«æš‚åœã€‚

æ•Œäºº AI åŸºç¡€ï¼šæ¨¡å—åŒ–è¡Œä¸ºæœº (Modular Behavioral Machine)
# ğŸ¤– ç³»ç»Ÿç­–åˆ’æ¡ˆï¼šæ•Œäºº AI åŸºç¡€ (Enemy AI Foundation)ï¼ˆğŸ”§ å®ç°ä¸­ï¼‰

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv2.0 (M1-W3 æœ€ç»ˆå®šç¨¿)
**ä¼˜å…ˆçº§**ï¼šP0 (æ ¸å¿ƒæˆ˜æ–—å¾ªç¯)
**é˜…è¯»å¯¹è±¡**ï¼šä¸»ç¨‹åºã€ç³»ç»Ÿç¨‹åºã€å…³å¡ç­–åˆ’
**å‰ç½®ä¾èµ–**ï¼šå°„å‡»ç³»ç»Ÿæ ¸å¿ƒæ¡†æ¶ï¼ˆâœ… å·²å®Œæˆï¼‰ã€æ˜Ÿå›¾ç¼–ç»‡ç³»ç»Ÿï¼ˆâœ… å·²å®Œæˆï¼‰

### å®ç°è¿›åº¦æ€»è§ˆ

| æ¨¡å— | å†…å®¹ | çŠ¶æ€ |
|------|------|------|
| Phase 1 æ ¸å¿ƒæ¡†æ¶ | HFSM çŠ¶æ€æœº + IState æ¥å£ | âœ… å·²å®Œæˆ |
| Phase 1 èº¯å£³å±‚ | EnemyEntity (IDamageable + IPoolable + ç§»åŠ¨/HP/é—ªç™½/å‡»é€€/æ­»äº¡) | âœ… å·²å®Œæˆ |
| Phase 1 å¤§è„‘å±‚ | EnemyBrain + å¤–å±‚çŠ¶æ€ (Idle/Chase/Engage/Return) | âœ… å·²å®Œæˆ |
| Phase 1 æ”»å‡»å±‚ | å†…å±‚å­çŠ¶æ€æœº (Telegraphâ†’Attackâ†’Recovery) | âœ… å·²å®Œæˆ |
| Phase 1 æ„ŸçŸ¥ç³»ç»Ÿ | EnemyPerception (è§†è§‰é”¥ 5Hz + å¬è§‰äº‹ä»¶ + è®°å¿†è¡°å‡) | âœ… å·²å®Œæˆ |
| Phase 1 æ•°æ®å±‚ | EnemyStatsSO (è¿‘æˆ˜ + è¿œç¨‹ + æ„ŸçŸ¥ + æŠ—æ€§ + æ ‡ç­¾) | âœ… å·²å®Œæˆ |
| Phase 1 ä¼¤å®³é›†æˆ | IDamageable æ¥å£ + Projectile/LaserBeam/EchoWave æ¡¥æ¥ | âœ… å·²å®Œæˆ |
| Phase 1 ç©å®¶å—ä¼¤ | ShipHealth : IDamageable + å‡»é€€/é—ªç™½/æ­»äº¡ | âœ… å·²å®Œæˆ |
| Phase 1 åŸå‹ï¼šè½å¤« | Rusher (EnemyBrain + è¿‘æˆ˜å†²é”‹) | âœ… å·²å®Œæˆ |
| Phase 1+ åŸå‹ï¼šå°„æ‰‹ | Shooter (ShooterBrain + ShootState/RetreatState + EnemyProjectile) | âœ… å·²å®Œæˆ |
| Phase 1 ç”Ÿæˆå™¨ | EnemySpawner (å¯¹è±¡æ±  + Round-robin + æ­»äº¡é‡ç”Ÿ) | âœ… å·²å®Œæˆ |
| Phase 1 Editor å·¥å…· | EnemyAssetCreator + BestiaryImporter (CSVâ†’SO) | âœ… å·²å®Œæˆ |
| Phase 2 æ”»å‡»æ•°æ®ç³»ç»Ÿ | AttackDataSO + HitboxResolver (æ•°æ®é©±åŠ¨æ”»å‡» + å¤šå½¢çŠ¶ç¢°æ’) | âœ… å·²å®Œæˆ |
| Phase 2 æ”»å‡»é‡æ„ | EngageState/AttackSubState/TelegraphSubState/RecoverySubState/ShootState å…¨éƒ¨æ”¯æŒ AttackDataSO | âœ… å·²å®Œæˆ |
| Phase 2 å¯¼æ¼”ç³»ç»Ÿ | EnemyDirector (æ”»å‡»ä»¤ç‰Œ + OrbitState ç¯ç»•ç­‰å¾…) | âœ… å·²å®Œæˆ |
| Phase 2 ç‚®å°å‹åŸå‹ | TurretBrain + Scan/Lock/Attack/Cooldown çŠ¶æ€ + æ¿€å…‰/è“„åŠ›å¼¹åŒå˜ä½“ | âœ… å·²å®Œæˆ |
| Phase 2 æ•Œæ–¹æ¿€å…‰ | EnemyLaserBeam (Raycast + LineRenderer + ç„å‡†çº¿ + å¯¹è±¡æ± ) | âœ… å·²å®Œæˆ |
| Phase 2 Editor å·¥å…· | AttackData èµ„äº§åˆ›å»º + Turret(Laser/Cannon) ä¸€é”®èµ„äº§åˆ›å»º | âœ… å·²å®Œæˆ |
| Phase 3 åˆºå®¢å‹åŸå‹ | StalkerBrain + Stealth/Flank/Strike/Disengage çŠ¶æ€ + èƒŒåˆº AttackDataSO | âœ… å·²å®Œæˆ |
| Phase 3 ææƒ§ç³»ç»Ÿ | EnemyFear + FleeState + OnAnyEnemyDeath å…¨å±€äº‹ä»¶ | âœ… å·²å®Œæˆ |
| Phase 3 é˜µè¥ç³»ç»Ÿ | FactionID + EnemyPerception é˜µè¥æ‰«æ + TargetType + LastKnownTargetPosition é‡å‘½å | âœ… å·²å®Œæˆ |
| Phase 3 é—ªé¿/æ ¼æŒ¡ AI | ThreatSensor + DodgeState + BlockState + BehaviorTag é©±åŠ¨ | âœ… å·²å®Œæˆ |
| Phase 3 ç²¾è‹±è¯ç¼€ç³»ç»Ÿ | EnemyAffixSO + EnemyAffixController + 5 è¯ç¼€èµ„äº§ + EnemySpawner é›†æˆ | âœ… å·²å®Œæˆ |
| Phase 3 å¤šé˜¶æ®µ Boss | BossPhaseDataSO + BossController + BossTransitionState + æ— æ•Œè¿‡æ¸¡ | âœ… å·²å®Œæˆ |

> âš ï¸ **æœ¬æ–‡æ¡£æ›¿ä»£ GDD.md ä¸­æ—§ç‰ˆ"æ¨¡å—åŒ–è¡Œä¸ºæœº"ç« èŠ‚**ã€‚æ—§ç‰ˆä¸ºæ—©æœŸæ„æƒ³ï¼Œæœ¬ç‰ˆä¸ºæ­£å¼æŠ€æœ¯å®šç¨¿ã€‚

---

## 0. è®¾è®¡å“²å­¦ï¼šç²¾å‡†çš„æ¼”å‘˜ï¼Œè€Œéè¶…çº§å¤§è„‘

ã€Šé™é»˜æ–¹èˆŸã€‹çš„æ•Œäººä¸éœ€è¦"èªæ˜"ï¼Œéœ€è¦**"å¯è¯»"**ã€‚

æ ¸å¿ƒåŸåˆ™ï¼š
1. **å¯è¯»æ€§**ï¼šç©å®¶èƒ½"è¯»æ‡‚"æ¯ä¸ªæ•Œäººåœ¨å¹²ä»€ä¹ˆï¼Œå»ºç«‹ muscle memory
2. **å¯è°ƒæ€§**ï¼šç­–åˆ’è°ƒå‚ä¸æ”¹ä»£ç ï¼Œæ–°æ•Œäººä¸å†™æ–°è„šæœ¬
3. **å¯é¢„æµ‹æ€§**ï¼šç±»é­‚æ¸¸æˆçš„çµé­‚åœ¨äº"æˆ‘æ­»äº†æ˜¯å› ä¸ºæˆ‘æ²¡è¯»å¯¹ï¼Œä¸æ˜¯å› ä¸º AI ä½œå¼Š"

---

## 1. æ¶æ„é€‰å‹ï¼šåˆ†å±‚çŠ¶æ€æœº (HFSM) â€” âœ… å·²å®Œæˆ

### 1.1 ä¸ºä»€ä¹ˆé€‰ HFSMï¼Ÿ

| æ–¹æ¡ˆ | é€‚ç”¨åœºæ™¯ | å¯¹ Project Ark çš„é€‚é…åº¦ |
|------|---------|----------------------|
| **ç®€å• FSM** | æ•Œäººè¡Œä¸ºç®€å•ï¼ˆIdleâ†’Chaseâ†’Attackï¼‰ | âœ… åŸºç¡€æ•Œäººå¤Ÿç”¨ï¼Œä½†æ”»å‡»èŠ‚å¥æ— æ³•ç»†åˆ† |
| **åˆ†å±‚ FSM (HFSM)** | éœ€è¦å­çŠ¶æ€ï¼ˆAttack ä¸‹æœ‰ Windupâ†’Strikeâ†’Recoveryï¼‰ | âœ…âœ… ç±»é­‚æ”»å‡»èŠ‚å¥çš„æ ¸å¿ƒ |
| **è¡Œä¸ºæ ‘ (BT)** | å¤§é‡æ¡ä»¶åˆ†æ”¯ã€ä¼˜å…ˆçº§åˆ‡æ¢ | âš ï¸ å¯¹ 2D ACT æ¥è¯´è¿‡åº¦è®¾è®¡ |
| **GOAP** | å¼€æ”¾ä¸–ç•Œ NPC | âŒ ä¸é€‚åˆ |

**æœ€ç»ˆé€‰æ‹©ï¼šåˆ†å±‚ FSM (HFSM)**

ç†ç”±ï¼š
- ç±»é­‚æ¸¸æˆçš„æ ¸å¿ƒåœ¨äº**æ”»å‡»åŠ¨ç”»é˜¶æ®µ**ï¼ˆé¢„å¤‡â†’å‡ºæ‹›â†’æ¢å¤ï¼‰ï¼Œè¿™å¤©ç„¶å°±æ˜¯å­çŠ¶æ€æœº
- é“¶æ²³æ¶é­”åŸçš„æ•Œäººè¡Œä¸ºæ¨¡å¼ç›¸å¯¹å›ºå®šï¼ˆå·¡é€»â†’å‘ç°â†’è¿½å‡»â†’æ”»å‡»â†’è„±æˆ˜ï¼‰ï¼ŒFSM ç›´è§‰æ¸…æ™°
- ç­–åˆ’è°ƒå‚å®¹æ˜“ï¼šæ¯ä¸ªçŠ¶æ€çš„è½¬ç§»æ¡ä»¶éƒ½æ˜¯å¯åºåˆ—åŒ–çš„é˜ˆå€¼
- çº¯ C# å®ç°ï¼ˆé MonoBehaviourï¼‰ï¼Œå¯å•å…ƒæµ‹è¯•

### 1.2 åŒå±‚ç»“æ„ `âœ… å·²å®ç°`

> **å·²å®ç°ï¼š** `IState` æ¥å£ + `StateMachine` çº¯ C# ç±»ï¼Œæ”¯æŒ Initialize/Tick/TransitionTo å’ŒåµŒå¥—å­çŠ¶æ€æœºã€‚å¤–å±‚å››çŠ¶æ€ (Idle/Chase/Engage/Return) + å†…å±‚ä¸‰é˜¶æ®µ (Telegraph/Attack/Recovery) å®Œæ•´å·¥ä½œã€‚å°„æ‰‹å‹é¢å¤–æ‰©å±•äº† ShootState + RetreatStateã€‚

```
å¤–å±‚çŠ¶æ€æœºï¼ˆæˆ˜æœ¯å±‚ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Idle â”€â”€â†’ Chase â”€â”€â†’ Engage â”€â”€â†’ Return       â”‚  â† âœ… å…¨éƒ¨å®ç°
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
              å†…å±‚çŠ¶æ€æœºï¼ˆæ”»å‡»å±‚ï¼‰
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Telegraph â†’ Attack â†’ Recovery â”‚  â† âœ… å…¨éƒ¨å®ç°
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- **å¤–å±‚**æ§åˆ¶"æ•Œäººåœ¨åšä»€ä¹ˆ"ï¼ˆå¾…æœºã€è¿½å‡»ã€äº¤æˆ˜ã€è„±æˆ˜å›å½’ï¼‰
- **å†…å±‚**æ§åˆ¶"æ”»å‡»ä¸­åœ¨åšä»€ä¹ˆ"ï¼ˆå‰æ‘‡ä¿¡å·ã€ä¼¤å®³çª—å£ã€æ¢å¤ç¡¬ç›´ï¼‰

---

## 2. ä¸‰å±‚æ¶æ„æ€»è§ˆ (Body / Brain / Director) â€” âœ… Phase 1 å·²å®Œæˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              EnemyDirector (å¯¼æ¼”å±‚)                â”‚  â† âœ… Phase 2 å·²å®Œæˆ
â”‚     æ”»å‡»ä»¤ç‰Œæ±  Â· å…¨å±€åè°ƒ Â· å£°æ³¢ä¼ æ’­ Â· ç¾¤ä½“è°ƒåº¦         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ åè°ƒ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           EnemyBrain + HFSM (å¤§è„‘å±‚)               â”‚  â† âœ… å·²å®Œæˆ
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  å¤–å±‚çŠ¶æ€æœº (æˆ˜æœ¯å±‚)                       â”‚    â”‚
â”‚  â”‚  Idle â”€â”€â†’ Chase â”€â”€â†’ Engage â”€â”€â†’ Return   â”‚    â”‚  âœ…
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                    â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  å†…å±‚çŠ¶æ€æœº (æ”»å‡»å±‚)                       â”‚    â”‚
â”‚  â”‚  Telegraph â†’ Attack â†’ Recovery          â”‚    â”‚  âœ…
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                  â”‚
â”‚  EnemyPerception (æ„ŸçŸ¥ç³»ç»Ÿ)                       â”‚  âœ…
â”‚  è§†è§‰é”¥ + å¬è§‰äº‹ä»¶ + è®°å¿†è¡°å‡                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ æŒ‡ä»¤
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            EnemyEntity (èº¯å£³å±‚)                    â”‚  â† âœ… å·²å®Œæˆ
â”‚  ç§»åŠ¨æ‰§è¡Œ Â· HP/éŸ§æ€§ Â· å—å‡»åé¦ˆ Â· å¯¹è±¡æ±  Â· IDamageable â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.1 ğŸ›ï¸ ç¬¬ä¸€å±‚ï¼šèº¯å£³ (The Body) â€”â€” `EnemyEntity` `âœ… å·²å®Œæˆ`

> **å·²å®ç°ï¼š** `EnemyEntity : MonoBehaviour, IDamageable, IPoolable`ã€‚`EnemySpawner` é€šè¿‡å¯¹è±¡æ± ç®¡ç†æ•Œäººç”Ÿæˆ/å›æ”¶ï¼ˆRound-robin åˆ·æ€ªç‚¹ + æ­»äº¡è‡ªåŠ¨é‡ç”Ÿï¼‰ã€‚`ShipHealth : IDamageable` è®©ç©å®¶é£èˆ¹ä¹Ÿèƒ½è¢«æ•Œäººæ”»å‡»ã€‚

ç‰©ç†å®ä½“å±‚ã€‚**ä¸æ€è€ƒï¼Œåªæ‰§è¡ŒæŒ‡ä»¤ã€‚**

- **ç§»åŠ¨æ‰§è¡Œ**ï¼šæ¥æ”¶æ–¹å‘å‘é‡ï¼Œé©±åŠ¨ Rigidbody2D é€Ÿåº¦ âœ… `MoveTo()` / `StopMovement()`
- **ç”Ÿå‘½ç®¡ç†**ï¼šHP æ‰£é™¤ã€æ­»äº¡åˆ¤å®š âœ… | éŸ§æ€§ (Poise) å­—æ®µå·²å®šä¹‰ï¼Œè¿è¡Œæ—¶é€»è¾‘ ğŸŸ¡ å¾…å®ç°
- **å—å‡»åé¦ˆ**ï¼šé—ªç™½è„‰å†² âœ…ã€å‡»é€€åŠ› âœ… | é¡¿å¸§ (HitStop) ğŸŸ¡ å¾…å®ç°
- **ä¼¤å®³æ¥å£**ï¼šå®ç° `IDamageable` æ¥å£ âœ…ï¼Œå››ç§æ”»å‡»æºï¼ˆProjectile/LaserBeam/EchoWave/AttackSubStateï¼‰å‡å·²æ¡¥æ¥
- **å¯¹è±¡æ± **ï¼šå®ç° `IPoolable` æ¥å£ âœ…ï¼Œ`EnemySpawner` é€šè¿‡ `PoolManager` ç®¡ç†ç”Ÿæˆ/å›æ”¶
- **æ•°æ®é©±åŠ¨**ï¼šæ‰€æœ‰æ•°å€¼ä» `EnemyStatsSO` (ScriptableObject) è¯»å– âœ…

### 2.2 ğŸ§  ç¬¬äºŒå±‚ï¼šå¤§è„‘ (The Brain) â€”â€” `EnemyBrain` + HFSM `âœ… å·²å®Œæˆ`

> **å·²å®ç°ï¼š** `EnemyBrain` åŸºç±»æ„å»ºè½å¤«å‹ HFSM (Idle/Chase/Engage/Return)ã€‚`ShooterBrain` ç»§æ‰¿å¹¶æ‰©å±•è¿œç¨‹å°„å‡»çŠ¶æ€å›¾ (ShootState/RetreatState)ã€‚ä¸åŒåŸå‹é€šè¿‡ç»§æ‰¿ + SO å‚æ•°å·®å¼‚åŒ–å®ç°ã€‚Editor æ¨¡å¼ä¸‹ OnGUI æ˜¾ç¤ºå½“å‰çŠ¶æ€åä¾¿äºè°ƒè¯•ã€‚

å†³ç­–å±‚ã€‚ä¸åŒçš„æ•ŒäººåŸå‹é€šè¿‡**ä¸åŒçš„çŠ¶æ€é…ç½® + SO å‚æ•°å·®å¼‚åŒ–**å®ç°ï¼Œè€Œéä¸åŒçš„è„šæœ¬ã€‚

**é€šç”¨çŠ¶æ€æµ (State Flow)ï¼š** âœ…
```
[Idle] â”€â”€æ„ŸçŸ¥è§¦å‘â”€â”€â†’ [Chase] â”€â”€è¿›å…¥æ”»å‡»è·ç¦»â”€â”€â†’ [Engage] â”€â”€æ”»å‡»å®Œæˆâ”€â”€â†’ [Chase]
  â†‘                    â”‚                                              â”‚
  â”‚                    â”œâ”€â”€è¶…å‡ºè¿½å‡»è·ç¦»â”€â”€â†’ [Return] â”€â”€åˆ°è¾¾å‡ºç”Ÿç‚¹â”€â”€â†’ [Idle]
  â”‚                    â””â”€â”€è®°å¿†æ¶ˆå¤±â”€â”€â”€â”€â”€â†’ [Return]
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å°„æ‰‹å‹æ‰©å±•çŠ¶æ€æµï¼š** âœ…
```
[Chase] â”€â”€è¿›å…¥ PreferredRangeâ”€â”€â†’ [Shoot] (Telegraphâ†’Burstâ†’Recovery)
                                    â”‚ ç©å®¶è¿‡è¿‘ (< RetreatRange)
                                    â–¼
                                [Retreat] â”€â”€æ¢å¤å®‰å…¨è·ç¦»â”€â”€â†’ [Shoot]
```

### 2.3 ğŸ¬ ç¬¬ä¸‰å±‚ï¼šå¯¼æ¼” (The Director) â€”â€” `EnemyDirector` (Phase 2) `âœ… å·²å®Œæˆ`

å…¨å±€åè°ƒå±‚ã€‚è§£å†³"å¤šæ•ŒäººåŒæ—¶åœ¨åœº"çš„ä½“éªŒé—®é¢˜ã€‚

- **æ”»å‡»ä»¤ç‰Œ (Aggression Tokens)**ï¼šå…¨å±€ä»¤ç‰Œæ± é™åˆ¶åŒæ—¶æ”»å‡»çš„æ•Œäººæ•°é‡ï¼ˆå¦‚æœ€å¤š 2 ä¸ªï¼‰ï¼Œå…¶ä½™æ•Œäººå¤„äº Orbit ç¯ç»•çŠ¶æ€å¼å«åŠ©å¨ï¼Œè¥é€ "ç”µå½±æ„Ÿçš„è½®æµå•æŒ‘" âœ… å·²å®Œæˆ
- **å¬è§‰ä¼ æ’­ (Sound Propagation)**ï¼šç©å®¶å¼€ç«äº§ç”Ÿ"éšå½¢å£°æ³¢"ï¼Œä¼ æ’­èŒƒå›´å†…çš„æ•Œäººè¢«æ¿€æ´» âœ… å·²éƒ¨åˆ†å®ç°
  > *æ³¨ï¼š`StarChartController.OnWeaponFired` é™æ€äº‹ä»¶å·²å¹¿æ’­å¼€ç«ä½ç½® + 15f å™ªéŸ³åŠå¾„ï¼Œ`EnemyPerception` å·²è®¢é˜…å¹¶æŒ‰è·ç¦»æ¿€æ´»ã€‚ä½†å°šæ— è·¨æˆ¿é—´ä¼ æ’­/å¢™å£è¡°å‡é€»è¾‘ã€‚*

---

## 3. æ”»å‡»è®¾è®¡ï¼š"ä¿¡å·-çª—å£"æ¨¡å‹ (Signal-Window Model) â€” âœ… å·²å®Œæˆ

> **å·²å®ç°ï¼š** `TelegraphSubState`ï¼ˆåœæ­¢ç§»åŠ¨ + sprite å˜çº¢è­¦å‘Šï¼‰â†’ `AttackSubState`ï¼ˆOverlapCircle ä¼¤å®³åŒºåŸŸ + Commitment ä¸å¯è½¬å‘ï¼‰â†’ `RecoverySubState`ï¼ˆç¡¬ç›´ + æ ‡è®°å¾ªç¯å®Œæˆï¼‰ã€‚å°„æ‰‹å‹æ‰©å±•ä¸º Telegraphâ†’Burst Fireï¼ˆè¿å°„ï¼‰â†’Recoveryã€‚æ‰€æœ‰é˜¶æ®µæ—¶é•¿é€šè¿‡ `EnemyStatsSO` é…ç½®ã€‚

è¿™æ˜¯ç±»é­‚æ¸¸æˆçš„çµé­‚ã€‚æ¯ä¸ªæ•Œäººæ”»å‡»éƒ½å¿…é¡»æœ‰æ¸…æ™°çš„é˜¶æ®µåˆ’åˆ†ï¼Œç©å®¶é€šè¿‡è¯†åˆ«"ä¿¡å·"æ¥é€‰æ‹©å›é¿ç­–ç•¥ã€‚

```
[Idle] â†’ [Telegraph å‰æ‘‡] â†’ [Attack å‡ºæ‹›] â†’ [Recovery æ¢å¤] â†’ [Cooldown å†·å´]
          â†‘ ä¿¡å·é˜¶æ®µ           â†‘ ä¼¤å®³çª—å£        â†‘ æƒ©ç½šçª—å£
          ç©å®¶è¯»å–              èº²é¿/æ ¼æŒ¡          åå‡»æœºä¼š
```

### 3.1 é˜¶æ®µè¯¦è§£ `âœ… å…¨éƒ¨å®ç°`

| é˜¶æ®µ | æ—¶é•¿ (SO å¯é…) | æ•Œäººè¡Œä¸º | ç©å®¶ç­–ç•¥ | çŠ¶æ€ |
|------|--------------|---------|---------|------|
| **Telegraph (å‰æ‘‡)** | 0.3s ~ 1.0s | åœæ­¢ç§»åŠ¨ï¼Œæ’­æ”¾è“„åŠ›/å˜çº¢/å¼å«åŠ¨ç”» | è¯†åˆ«æ”»å‡»ç±»å‹ï¼Œå‡†å¤‡é—ªé¿ | âœ… `TelegraphSubState` |
| **Attack (å‡ºæ‹›)** | 0.1s ~ 0.5s | ç”Ÿæˆä¼¤å®³ Hitbox/å‘å°„å­å¼¹ï¼Œ**ä¸å¯è½¬å‘ (Commitment)** | åˆ©ç”¨èµ°ä½èº²é¿ï¼Œæˆ–æ ¼æŒ¡ | âœ… `AttackSubState` (è¿‘æˆ˜) / `ShootState` (è¿œç¨‹) |
| **Recovery (æ¢å¤)** | 0.5s ~ 1.5s | ç¡¬ç›´çŠ¶æ€ï¼Œä¸ç§»åŠ¨ä¸æ”»å‡» | **åå‡»çª—å£**ï¼Œç©å®¶è¾“å‡ºæœ€å¤§åŒ– | âœ… `RecoverySubState` |

### 3.2 æ•°æ®é…ç½® `âœ…`

æ¯ä¸ªæ”»å‡»éƒ½é€šè¿‡ `EnemyStatsSO` é…ç½®é˜¶æ®µæ—¶é•¿ï¼Œç­–åˆ’å¯ä»¥ç²¾ç¡®è°ƒæ•´æ¯ä¸ªé˜¶æ®µçš„æ—¶é—´çª—å£æ¥æ§åˆ¶éš¾åº¦ï¼š
- ç¼©çŸ­ Telegraph = æ›´éš¾è¯»å– = é«˜éš¾åº¦
- å»¶é•¿ Recovery = æ›´å¤§æƒ©ç½šçª—å£ = ä½éš¾åº¦

---

## 4. æ„ŸçŸ¥ç³»ç»Ÿ (Perception System)ï¼š"å¬è§‰ > è§†è§‰" â€” âœ… å·²å®Œæˆ

> **å·²å®ç°ï¼š** `EnemyPerception` MonoBehaviourï¼Œå®Œæ•´å®ç°è§†è§‰ + å¬è§‰ + è®°å¿†ä¸‰å±‚æ„ŸçŸ¥ã€‚æš´éœ² `HasTarget`ã€`CanSeePlayer`ã€`HasHeardPlayer`ã€`LastKnownPlayerPosition`ã€`DistanceToTarget` å±æ€§ä¾›çŠ¶æ€æœºæŸ¥è¯¢ã€‚æ”¯æŒ `ResetPerception()` å¯¹è±¡æ± é‡ç½®ã€‚

æ•Œäººä¸æ˜¯å…¨çŸ¥å…¨èƒ½çš„ã€‚æ„ŸçŸ¥ç³»ç»Ÿèµ‹äºˆå®ƒä»¬"äº”æ„Ÿ"ï¼Œä¹Ÿä¸ºç©å®¶æä¾›ç­–ç•¥ç©ºé—´ã€‚

### 4.1 æ„ŸçŸ¥å±‚çº§ `âœ… å…¨éƒ¨å®ç°`

```
æ„ŸçŸ¥å±‚çº§ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰ï¼š
1. è§†è§‰é”¥ï¼ˆLoS + æ‰‡å½¢æ£€æµ‹ï¼‰â†’ åŸºç¡€å·¡é€»å‘ç°        âœ… PerformVisionCheck() 5Hz
2. å¬è§‰èŒƒå›´ï¼ˆåœ†å½¢ï¼Œå—æ­¦å™¨å™ªéŸ³å€¼å½±å“ï¼‰â†’ å°„å‡»æš´éœ²ä½ç½®  âœ… HandleWeaponFired() äº‹ä»¶è®¢é˜…
3. è®°å¿†è¡°å‡ï¼ˆLastKnownPosition + è¶…æ—¶é—å¿˜ï¼‰â†’ è„±æˆ˜å›å½’  âœ… UpdateMemoryDecay()
```

### 4.2 æŠ€æœ¯å®ç°åŸåˆ™ `âœ… å…¨éƒ¨éµå¾ª`

- **è§†è§‰**ï¼šå®šé¢‘æ£€æµ‹ï¼ˆæ¯ 0.2 ç§’ä¸€æ¬¡ï¼‰ï¼Œä¸æ¯å¸§æ‰§è¡Œ `Physics2D.OverlapCircle` âœ…
- **å¬è§‰**ï¼š**äº‹ä»¶è®¢é˜… + è·ç¦»æ ¡éªŒ**ã€‚ç›‘å¬ `StarChartController.OnWeaponFired` é™æ€äº‹ä»¶ï¼Œé€šè¿‡è·ç¦»åˆ¤æ–­æ˜¯å¦åœ¨ `HearingRange` å†… âœ…
- **è®°å¿†**ï¼šå¤±å»è§†çº¿åç»´æŒ `LastKnownPlayerPosition` ä¸€æ®µæ—¶é—´ï¼ˆ`MemoryDuration`ï¼‰ï¼Œè¶…æ—¶åæ¸…é™¤ï¼Œæ•Œäººè„±æˆ˜å›å½’ âœ…

### 4.3 ç­–ç•¥ç©ºé—´

- ç©å®¶ä½¿ç”¨ä½å™ªéŸ³æ­¦å™¨ï¼ˆå¦‚è¿‘æˆ˜/æ¶ˆéŸ³ï¼‰å¯ä»¥é¿å…æƒŠåŠ¨è¿œå¤„çš„æ•Œäºº âœ… åŸºç¡€è®¾æ–½å°±ç»ªï¼ˆå™ªéŸ³åŠå¾„å‚æ•°åŒ–ï¼‰
- ç©å®¶å¯ä»¥åˆ©ç”¨æ©ä½“/è§†è§‰ç›²åŒºç»•è¿‡æ•Œäºº âœ… LoS Raycast æ”¯æŒé®æŒ¡
- æœªæ¥å¯æ”¯æŒ"å™ªéŸ³è¯±é¥µ"é“å…·ï¼ˆæ‰”åˆ°è¿œå¤„å¸å¼•æ•Œäººï¼‰ğŸŸ¡ å¾…å®ç°

---

## 5. æ•°æ®é©±åŠ¨é…ç½® (EnemyStatsSO) â€” âœ… å·²å®Œæˆ

> **å·²å®ç°ï¼š** `EnemyStatsSO : ScriptableObject`ï¼Œè¦†ç›–èº«ä»½/ç”Ÿå‘½/ç§»åŠ¨/è¿‘æˆ˜/è¿œç¨‹/æ„ŸçŸ¥/è„±æˆ˜/è¡¨ç°/æŠ—æ€§/æ ‡ç­¾å…± 30+ ä¸ªå­—æ®µã€‚`BestiaryImporter` Editor å·¥å…·æ”¯æŒä» `Enemy_Bestiary.csv`ï¼ˆ50 åˆ—ï¼‰ä¸€é”®æ‰¹é‡å¯¼å…¥/æ›´æ–° SO èµ„äº§ã€‚å½“å‰ CSV ä¸­å·²é…ç½® 26 ç§æ•Œäººå®Œæ•´æ•°æ®ã€‚

æ‰€æœ‰æ•Œäººæ•°å€¼é€šè¿‡ `ScriptableObject` é…ç½®ï¼Œ**ç¦æ­¢ hardcode**ã€‚

| åˆ†ç±» | å­—æ®µ | ç±»å‹ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|------|------|
| **èº«ä»½** | EnemyName | string | æ˜¾ç¤ºåç§° | âœ… |
| **èº«ä»½** | EnemyID | string | å”¯ä¸€æ ‡è¯†ç¬¦ | âœ… |
| **ç”Ÿå‘½** | MaxHP | float | æœ€å¤§ç”Ÿå‘½å€¼ | âœ… |
| **ç”Ÿå‘½** | Poise | float | éŸ§æ€§å€¼ï¼ˆå‰Šå‡åˆ°0è§¦å‘ç¡¬ç›´ï¼‰ | âœ… å­—æ®µå®šä¹‰ï¼Œè¿è¡Œæ—¶é€»è¾‘å¾…å®ç° |
| **ç§»åŠ¨** | MoveSpeed | float | ç§»åŠ¨é€Ÿåº¦ | âœ… |
| **è¿‘æˆ˜æ”»å‡»** | AttackDamage | float | æ”»å‡»ä¼¤å®³ | âœ… |
| **è¿‘æˆ˜æ”»å‡»** | AttackRange | float | æ”»å‡»è·ç¦» | âœ… |
| **è¿‘æˆ˜æ”»å‡»** | AttackCooldown | float | æ”»å‡»é—´éš” | âœ… |
| **æ”»å‡»é˜¶æ®µ** | TelegraphDuration | float | å‰æ‘‡æ—¶é•¿ | âœ… |
| **æ”»å‡»é˜¶æ®µ** | AttackActiveDuration | float | å‡ºæ‹›æ—¶é•¿ | âœ… |
| **æ”»å‡»é˜¶æ®µ** | RecoveryDuration | float | æ¢å¤æ—¶é•¿ | âœ… |
| **è¿œç¨‹æ”»å‡»** | ProjectilePrefab | GameObject | è¿œç¨‹å¼¹å¤´é¢„åˆ¶ä½“ | âœ… *æ–°å¢* |
| **è¿œç¨‹æ”»å‡»** | ProjectileSpeed | float | å¼¹å¤´é£è¡Œé€Ÿåº¦ | âœ… *æ–°å¢* |
| **è¿œç¨‹æ”»å‡»** | ProjectileDamage | float | å¼¹å¤´ä¼¤å®³ | âœ… *æ–°å¢* |
| **è¿œç¨‹æ”»å‡»** | ShotsPerBurst | int | è¿å°„å¼¹æ•° | âœ… *æ–°å¢* |
| **è¿œç¨‹æ”»å‡»** | BurstInterval | float | è¿å°„é—´éš” | âœ… *æ–°å¢* |
| **è¿œç¨‹æ”»å‡»** | PreferredRange | float | ç†æƒ³å°„å‡»è·ç¦» | âœ… *æ–°å¢* |
| **è¿œç¨‹æ”»å‡»** | RetreatRange | float | åæ’¤è§¦å‘è·ç¦» | âœ… *æ–°å¢* |
| **æ„ŸçŸ¥** | SightRange | float | è§†è§‰èŒƒå›´ | âœ… |
| **æ„ŸçŸ¥** | SightAngle | float | è§†è§‰æ‰‡å½¢åŠè§’ | âœ… |
| **æ„ŸçŸ¥** | HearingRange | float | å¬è§‰èŒƒå›´ | âœ… |
| **è„±æˆ˜** | LeashRange | float | è„±æˆ˜è·ç¦» | âœ… |
| **è„±æˆ˜** | MemoryDuration | float | è®°å¿†è¡°å‡æ—¶é•¿ | âœ… |
| **æŠ—æ€§** | Resist_Physical~Void | floatÃ—5 | äº”ç§å…ƒç´ æŠ—æ€§ (0~1) | âœ… *æ–°å¢* |
| **æ‰è½** | DropTableID | string | æ‰è½è¡¨ ID | âœ… *æ–°å¢* |
| **å…ƒæ•°æ®** | PlanetID | string | å½’å±æ˜Ÿçƒ | âœ… *æ–°å¢* |
| **å…ƒæ•°æ®** | SpawnWeight | float | ç”Ÿæˆæƒé‡ | âœ… *æ–°å¢* |
| **å…ƒæ•°æ®** | BehaviorTags | List\<string\> | è¡Œä¸ºæ ‡ç­¾ | âœ… *æ–°å¢* |
| **è¡¨ç°** | HitFlashDuration | float | å—å‡»é—ªç™½æ—¶é•¿ | âœ… |
| **è¡¨ç°** | BaseColor | Color | åŸºç¡€é¢œè‰² | âœ… |

---

## 6. æ•ŒäººåŸå‹ (Enemy Archetypes)

åŸºäº HFSM + SO æ•°æ®é©±åŠ¨æ¶æ„ï¼Œä»¥ä¸‹åŸå‹é€šè¿‡**åŒä¸€å¥—ä»£ç  + ä¸åŒ SO å‚æ•°**å®ç°ï¼š

### 6.1 è½å¤«å‹ (The Rusher) â€” Phase 1 é¦–å‘åŸå‹ `âœ… å·²å®Œæˆ`
- **å¯¹åº”**ï¼šæ·±æ¸Šçˆ¬è¡Œè€…
- **é€»è¾‘**ï¼šå‘ç° â†’ å…¨é€Ÿç›´çº¿å†²é”‹ â†’ è·ç¦» < AttackRange â†’ æ’­æ”¾å’¬åˆå‰æ‘‡ â†’ é€ æˆä¼¤å®³ â†’ åœé¡¿æ¢å¤ âœ…
- **è¡¨ç°**ï¼šåƒç–¯ç‹—ä¸€æ ·ï¼Œä¾é æ•°é‡å–èƒœï¼Œç»™ç©å®¶å·¨å¤§å‹è¿«æ„Ÿ âœ…
- **ç‰¹å¾å‚æ•°**ï¼šé«˜ MoveSpeedã€çŸ­ TelegraphDurationã€çŸ­ AttackRangeã€é•¿ RecoveryDuration âœ… SO å·²é…ç½®
- **æŠ€æœ¯é‡ç‚¹**ï¼šç¾¤èšç®—æ³•ï¼ˆBoids Separationï¼‰ï¼Œå¤šåªåŒæ—¶å‡ºç°æ—¶åƒè™«ç¾¤ä¸€æ ·è‡ªç„¶æ•£å¼€ ğŸŸ¡ å¾…å®ç°
- **å®ç°**ï¼š`EnemyBrain` åŸºç±» + `EnemyStatsSO` Rusher é¢„è®¾ï¼Œé€šè¿‡ `EnemyAssetCreator` ä¸€é”®åˆ›å»ºèµ„äº§
- **Play Mode éªŒè¯**ï¼šå®Œæ•´ä¼¤å®³é“¾è·¯é€šç•…ï¼Œæ­»äº¡å›æ± +å»¶è¿Ÿé‡ç”Ÿæ­£å¸¸ âœ…

### 6.2 å°„æ‰‹å‹ (The Shooter / Kiter) â€” Phase 1+ `âœ… å·²å®Œæˆ`
- **å¯¹åº”**ï¼šå·¥èœ‚æ— äººæœºï¼ˆåŸ"è…åŒ–æ¼‚æµ®è€…"ï¼‰
- **é€»è¾‘**ï¼š
  - è·ç¦» > PreferredRangeï¼šé è¿‘ (Chase) âœ…
  - è·ç¦» < RetreatRangeï¼šé€ƒç¦»ï¼ˆåå‘ç§»åŠ¨ï¼‰âœ… `RetreatState`
  - è·ç¦»åˆé€‚ï¼šåœä¸‹ â†’ å‰æ‘‡ï¼ˆsprite çº¢é—ªï¼‰â†’ ä¸‰è¿å‘æŠ•å°„ç‰© â†’ æ¢å¤ç¡¬ç›´ âœ… `ShootState`
- **è¡¨ç°**ï¼šè¿œç¨‹éªšæ‰°è€…ï¼Œè¿«ä½¿ç©å®¶åœ¨å¤„ç†è¿‘æˆ˜æ€ªçš„åŒæ—¶åˆ‡åæ’ âœ…
- **ç‰¹å¾å‚æ•°**ï¼šMoveSpeed=3.5ã€SightRange=16ã€PreferredRange=10ã€RetreatRange=5ã€ShotsPerBurst=3 âœ… SO å·²é…ç½®
- **å®ç°**ï¼š`ShooterBrain` ç»§æ‰¿ `EnemyBrain`ï¼Œæ‰©å±• ShootState + RetreatStateï¼›`EnemyProjectile` ç‹¬ç«‹äºç©å®¶å¼¹å¤´
- **èµ„äº§åˆ›å»º**ï¼š`EnemyAssetCreator` èœå• `Create Shooter Enemy Assets` ä¸€é”®åˆ›å»º

### 6.3 åˆºå®¢å‹ (The Stalker) â€” Phase 3 `âœ… å·²å®Œæˆ`
- **å¯¹åº”**ï¼šæš—å½±æ½œä¼è€…
- **é€»è¾‘**ï¼šå¹³æ—¶åŠé€æ˜ï¼ˆAlpha=0.1ï¼‰ â†’ ç»•åˆ°ç©å®¶èƒŒå â†’ æ˜¾å½¢ â†’ æå¿«å‰æ‘‡ â†’ æ”»å‡» â†’ ç¬é—´è¿œç¦»
- **è¡¨ç°**ï¼šç¥å‡ºé¬¼æ²¡ï¼Œå¼ºè¿«ç©å®¶è­¦æƒ•èƒŒå
- **ç‰¹å¾å‚æ•°**ï¼šæçŸ­ TelegraphDuration(0.1s)ã€é«˜ MoveSpeed(6.5)ã€é•¿ AttackCooldown(3s)
- **å®ç°**ï¼š`StalkerBrain` ç»§æ‰¿ `EnemyBrain`ï¼Œ4 ä¸ªä¸“å±çŠ¶æ€ (Stealth/Flank/StalkerStrike/Disengage)
- **èƒŒååˆ¤å®š**ï¼š`Vector2.Dot(playerFacing, dirToEnemy) < -0.3` ç¡®å®šåæ–¹å¼§
- **èµ„äº§åˆ›å»º**ï¼š`EnemyAssetCreator` èœå• `Create Stalker Enemy Assets` ä¸€é”®åˆ›å»º

### 6.4 ç‚®å°å‹ (The Turret) â€” Phase 2 `âœ… å·²å®Œæˆ`
- **å¯¹åº”**ï¼šå›ºå®šå“¨å¡”
- **é€»è¾‘**ï¼šä¸ç§»åŠ¨ï¼Œåªæ—‹è½¬æœå‘ â†’ é”å®š â†’ è“„åŠ›ï¼ˆæ¿€å…‰å˜ç²—ï¼‰ â†’ å°„å‡»
- **è¡¨ç°**ï¼šåŒºåŸŸå°é”è€…ï¼Œé™åˆ¶ç©å®¶èµ°ä½ç©ºé—´
- **ç‰¹å¾å‚æ•°**ï¼šMoveSpeed=0ã€é•¿ TelegraphDurationã€é«˜ AttackDamage

---

## 7. è¿›é˜¶ç³»ç»Ÿ (Phase 3) â€” âœ… å…¨éƒ¨å®Œæˆ

ä»¥ä¸‹ç³»ç»Ÿåœ¨ Phase 1/2 éªŒè¯æ ¸å¿ƒæˆ˜æ–—å¾ªç¯åå®ç°ï¼š

### 7.1 å¯¼æ¼”ç³»ç»Ÿ (Enemy Director) `âœ… å·²å®Œæˆ`
- **æ”»å‡»ä»¤ç‰Œ (Aggression Tokens)**ï¼šå…¨å±€ä»¤ç‰Œæ± é™åˆ¶åŒæ—¶æ”»å‡»çš„æ•Œäººæ•°ï¼Œå…¶ä½™ Orbit ç¯ç»•åŠ©å¨
- **å¬è§‰ä¼ æ’­ (Sound Propagation)**ï¼šå¼€ç«äº§ç”Ÿå£°æ³¢ï¼Œè·¨æˆ¿é—´æ¿€æ´»æ•Œäºº
  - *æ³¨ï¼šåŸºç¡€å¬è§‰å·²åœ¨ Phase 1 å®ç°ï¼ˆEnemyPerception è®¢é˜… OnWeaponFired äº‹ä»¶ï¼‰ï¼Œä½†ç¼ºå°‘è·¨æˆ¿é—´/å¢™å£è¡°å‡*

### 7.2 é˜µè¥ç³»ç»Ÿ (Faction System) `âœ… å·²å®Œæˆ`
- `EnemyStatsSO.FactionID` å­—æ®µ â€” âœ… å·²æ·»åŠ è¿è¡Œæ—¶é€»è¾‘
- `EnemyPerception.PerformFactionScan()` â€” 5Hz NonAlloc æ‰«ææ•Œæ–¹é˜µè¥
- `TargetType` æšä¸¾ (None/Player/FactionEnemy) â€” çŠ¶æ€æœºå¯åŒºåˆ†ç›®æ ‡ç±»å‹
- `LastKnownTargetPosition` â€” é€šç”¨ç›®æ ‡ä½ç½®ï¼Œæ›¿ä»£æ—§ç‰ˆ `LastKnownPlayerPosition`
- ä¸åŒé˜µè¥çš„æ•Œäººäº’ç›¸æ”»å‡»ï¼ˆ"é©±è™åç‹¼"ç­–ç•¥ï¼‰
- ç©å®¶å§‹ç»ˆä¼˜å…ˆï¼ˆå¯è§ç©å®¶ > é˜µè¥æ•Œäººï¼‰

### 7.3 åŠ¨æ€æƒ…ç»ª (Fear System) `âœ… å·²å®Œæˆ`
- `EnemyFear` ç»„ä»¶ï¼š`_fearValue` ç´¯ç§¯ï¼Œè¢«åŠ¨è¡°å‡ (`FearDecayRate`)
- ææƒ§æºï¼šåŒä¼´æ­»äº¡ (`FearFromAllyDeath`)ã€éŸ§æ€§å‡»ç ´ (`FearFromPoiseBroken`)
- è¶…è¿‡ `FearThreshold` â†’ å¼ºåˆ¶åˆ‡æ¢åˆ° `FleeState` é€ƒè·‘çŠ¶æ€
- `EnemyEntity.OnAnyEnemyDeath` å…¨å±€é™æ€äº‹ä»¶å¹¿æ’­æ­»äº¡ä½ç½®
- è¡¨ç°ï¼šé‡ç‚®ä¸€å‘è½°ç¢ç²¾è‹±ï¼Œé™„è¿‘å°æ€ªå››æ•£é€ƒè·‘

### 7.4 é—ªé¿/æ ¼æŒ¡ AI `âœ… å·²å®Œæˆ`
- `ThreatSensor` ç»„ä»¶ï¼š5Hz NonAlloc æ‰«ææ¥è¢­æŠ•å°„ç‰©ï¼Œåˆ¤æ–­æœå‘ (dot product)
- `DodgeState`ï¼šå‚ç›´äºå¨èƒæ–¹å‘å¿«é€Ÿä¾§é—ªï¼ŒBehaviorTag "CanDodge" æ§åˆ¶
- `BlockState`ï¼šé¢å‘å¨èƒä¸¾ç›¾ï¼Œå‡å°‘ä¼¤å®³ (`BlockDamageReduction`)ï¼ŒBehaviorTag "CanBlock" æ§åˆ¶
- `EnemyBrain.CheckThreatResponse()` åœ¨ Update ä¸­æ£€æŸ¥å¹¶ä¸­æ–­å½“å‰çŠ¶æ€

### 7.5 ç²¾è‹±è¯ç¼€ç³»ç»Ÿ (Elite Affix) `âœ… å·²å®Œæˆ`
- `EnemyAffixSO`ï¼šå®šä¹‰ç»Ÿè®¡ä¹˜æ•°ã€è¡Œä¸ºæ ‡ç­¾ã€ç‰¹æ®Šæ•ˆæœ (Berserk/Shielded/Explosive/Vampiric/Reflective)
- `EnemyAffixController`ï¼šè¿è¡Œæ—¶åº”ç”¨è¯ç¼€ï¼Œä¿®æ”¹ EnemyEntity è¿è¡Œæ—¶ç»Ÿè®¡
- 5 ä¸ªé¢„åˆ¶è¯ç¼€èµ„äº§ï¼šBerserk(+50%ä¼¤å®³)ã€Shielded(+100%HP)ã€Explosive(æ­»äº¡AoE)ã€Vampiric(å¸è¡€)ã€Reflective(åä¼¤)
- `EnemySpawner` æ”¯æŒç²¾è‹±æ¦‚ç‡ç”Ÿæˆ (`_eliteChance`, `_possibleAffixes`)

### 7.6 å¤šé˜¶æ®µ Boss æ§åˆ¶å™¨ `âœ… å·²å®Œæˆ`
- `BossPhaseDataSO`ï¼šå®šä¹‰é˜¶æ®µ HP é˜ˆå€¼ã€æ”»å‡»æ¨¡å¼ã€ç»Ÿè®¡ä¿®æ­£ã€è¿‡æ¸¡æ•ˆæœ
- `BossController`ï¼šç›‘å¬ OnDamageTakenï¼ŒæŒ‰ HP æ¯”ä¾‹è§¦å‘é˜¶æ®µè½¬æ¢
- `BossTransitionState`ï¼šè¿‡æ¸¡æœŸé—´æ— æ•Œã€è§†è§‰è„‰å†²ã€HitStopï¼Œç»“æŸåå›å½’æˆ˜æ–—
- `EnemyEntity.IsInvulnerable`ï¼šè¿‡æ¸¡æœŸé—´å…ä¼¤
- `EnemyBrain.ForceTransition()`ï¼šBoss æ§åˆ¶å™¨è°ƒç”¨å¼ºåˆ¶çŠ¶æ€è½¬æ¢

### 7.7 é«˜çº§æ„ŸçŸ¥ `ğŸŸ¡ æœªå¼€å§‹`
- å™ªéŸ³è¯±é¥µé“å…·
- è§†è§‰æ©ä½“/éšèº«å…‰å¸†äº¤äº’
- å£°éŸ³ç©¿å¢™è¡°å‡

---

## 8. å®æ–½è·¯çº¿å›¾

```
Phase 1: AI åŸºç¡€æ¡†æ¶                                     âœ… å…¨éƒ¨å®Œæˆ
  â”œâ”€ HFSM çŠ¶æ€æœºæ¡†æ¶ï¼ˆçº¯ C# ç±»ï¼‰                          âœ… IState + StateMachine
  â”œâ”€ æ„ŸçŸ¥ç³»ç»Ÿï¼ˆè§†è§‰ + å¬è§‰ + è®°å¿†è¡°å‡ï¼‰                    âœ… EnemyPerception
  â”œâ”€ åŸºç¡€çŠ¶æ€é›†ï¼ˆIdle/Chase/Engage/Returnï¼‰               âœ… 4 ä¸ªå¤–å±‚çŠ¶æ€
  â”œâ”€ æ”»å‡»å­çŠ¶æ€ï¼ˆTelegraph/Attack/Recoveryï¼‰               âœ… 3 ä¸ªå†…å±‚å­çŠ¶æ€
  â”œâ”€ EnemyStatsSO æ•°æ®ç»“æ„ï¼ˆè¿‘æˆ˜+è¿œç¨‹+æ„ŸçŸ¥+æŠ—æ€§+æ ‡ç­¾ï¼‰       âœ… 30+ å­—æ®µ
  â”œâ”€ IDamageable æ¥å£ + å››ç§æ”»å‡»æºæ¡¥æ¥                     âœ… Projectile/Laser/Echo/Melee
  â”œâ”€ ç©å®¶å—ä¼¤é—­ç¯ï¼ˆShipHealth : IDamageableï¼‰              âœ… å‡»é€€+é—ªç™½+æ­»äº¡
  â”œâ”€ å¯¹è±¡æ± ç”Ÿæˆå™¨ï¼ˆEnemySpawnerï¼‰                          âœ… Pool + Round-robin + é‡ç”Ÿ
  â”œâ”€ ç¬¬ä¸€ä¸ªå¯ç©åŸå‹ï¼šè½å¤«å‹ (The Rusher)                    âœ… Play Mode éªŒè¯é€šè¿‡
  â”œâ”€ ç¬¬äºŒä¸ªå¯ç©åŸå‹ï¼šå°„æ‰‹å‹ (The Shooter)                   âœ… ShooterBrain + EnemyProjectile
  â”œâ”€ Editor å·¥å…·ï¼ˆEnemyAssetCreator + BestiaryImporterï¼‰   âœ… ä¸€é”®èµ„äº§åˆ›å»º + CSV å¯¼å…¥
  â””â”€ æ€ªç‰©å›¾é‰´æ•°æ®ï¼ˆEnemy_Bestiary.csv 26 ç§æ•Œäººï¼‰           âœ… P1+P2 å®Œæ•´æ•°å€¼

Phase 1 é—ç•™é¡¹ï¼ˆå·²è¡¥å®Œï¼‰:
  â”œâ”€ éŸ§æ€§ (Poise) è¿è¡Œæ—¶é€»è¾‘                              âœ… StaggerState + OnPoiseBroken äº‹ä»¶ + SuperArmor è±å…
  â”œâ”€ é¡¿å¸§ (HitStop) åé¦ˆ                                  âœ… HitStopEffect å…¨å±€å•ä¾‹ (éŸ§æ€§å‡»ç ´ 0.08s / å‡»æ€ 0.06s)
  â””â”€ ç¾¤èšç®—æ³• (Boids Separation)                          âœ… GetSeparationForce() + ChaseState æ··åˆ

Phase 2: æ”»å‡»ç³»ç»Ÿ & å¤šåŸå‹                                âœ… å…¨éƒ¨å®Œæˆ
  â”œâ”€ å¤šæ”»å‡»æ¨¡å¼é€‰æ‹©ï¼ˆAttackDataSOï¼‰                          âœ… AttackDataSO + AttackType/HitboxShape æšä¸¾
  â”œâ”€ Hitbox ç³»ç»Ÿå®Œå–„                                        âœ… HitboxResolver (Circle/Box/Cone, NonAlloc)
  â”œâ”€ æ”»å‡»çŠ¶æ€é‡æ„                                           âœ… EngageState/AttackSubState/ShootState å…¨é¢æ”¯æŒ AttackDataSO
  â”œâ”€ å¯¼æ¼”ç³»ç»Ÿï¼ˆæ”»å‡»ä»¤ç‰Œ + ç¾¤ä½“åè°ƒï¼‰                          âœ… EnemyDirector + OrbitState (ç¯ç»•ç­‰å¾…)
  â”œâ”€ ç‚®å°å‹åŸå‹ï¼ˆæ¿€å…‰å˜ä½“ï¼‰                                   âœ… TurretBrain + EnemyLaserBeam + Scan/Lock/Attack/Cooldown
  â”œâ”€ ç‚®å°å‹åŸå‹ï¼ˆè“„åŠ›å¼¹å˜ä½“ï¼‰                                 âœ… TurretCannon (å…±äº« TurretBrain + AttackDataSO é…ç½®)
  â””â”€ Editor å·¥å…·æ‰©å±•                                        âœ… AttackData + Turret ä¸€é”®èµ„äº§åˆ›å»º

Phase 3: é«˜çº§è¡Œä¸º                                         âœ… å…¨éƒ¨å®Œæˆ
  â”œâ”€ åˆºå®¢å‹åŸå‹                                             âœ… StalkerBrain + Stealth/Flank/Strike/Disengage
  â”œâ”€ ææƒ§ç³»ç»Ÿ                                               âœ… EnemyFear + FleeState + OnAnyEnemyDeath
  â”œâ”€ é˜µè¥ç³»ç»Ÿ                                               âœ… FactionID + PerformFactionScan + TargetType
  â”œâ”€ é—ªé¿/æ ¼æŒ¡ AI                                           âœ… ThreatSensor + DodgeState + BlockState
  â”œâ”€ ç²¾è‹±è¯ç¼€ç³»ç»Ÿ                                            âœ… EnemyAffixSO + Controller + 5 é¢„åˆ¶è¯ç¼€
  â””â”€ å¤šé˜¶æ®µ Boss æ§åˆ¶å™¨                                      âœ… BossPhaseDataSO + BossController + BossTransitionState
```

---

## 9. æ€§èƒ½çº¦æŸ â€” âœ… å…¨éƒ¨éµå¾ª

- æ„ŸçŸ¥ç³»ç»Ÿè§†è§‰æ£€æµ‹é¢‘ç‡ â‰¤ 5Hzï¼ˆæ¯ 0.2 ç§’ï¼‰ï¼Œå¤§é‡æ•Œäººæ—¶ä¸å¡ âœ… `_visionCheckInterval = 0.2f`
- å¬è§‰äº‹ä»¶é‡‡ç”¨å¹¿æ’­ + è·ç¦»è¿‡æ»¤ï¼Œä¸ç”¨ç‰©ç†ç¢°æ’ä½“ âœ… `StarChartController.OnWeaponFired` é™æ€äº‹ä»¶
- æ‰€æœ‰æ•Œäººå®ä½“ä½¿ç”¨å¯¹è±¡æ± ç®¡ç†ï¼ˆå¤ç”¨å·²æœ‰ `PoolManager`ï¼‰âœ… `EnemySpawner` + `GameObjectPool`
- HFSM ä¸ºçº¯ C# ç±»ï¼Œæ—  MonoBehaviour å¼€é”€ âœ… `StateMachine` + `IState` å‡ä¸ºçº¯ C#
- æ•Œäººä½¿ç”¨ "Enemy" Layerï¼Œç¢°æ’çŸ©é˜µæŒ‰éœ€é…ç½® âœ… Physics2D ç¢°æ’çŸ©é˜µå·²è®¾ç½®
