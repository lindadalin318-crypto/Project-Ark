
# 🚀 太空生活系统设计 — Space Life System Design

**文档版本**：v1.0  
**创建日期**：2026-02-16  
**项目**：静默方舟 (Project Ark)  
**核心玩法**：飞船内部探索 + NPC 互动

---

## 一、核心理念

### 1.1 系统概述

**太空生活系统**是 Project Ark 的核心休闲系统，让玩家在战斗间隙体验飞船内的日常生活。

| 要素 | 说明 |
|------|------|
| **双视角切换** | 战斗视角 ↔ 飞船内部视角 |
| **2D 横版探索** | 飞船内移动、互动 |
| **NPC 社交** | 聊天、送礼、建立关系 |
| **环境营造** | 驾驶室、星图室、船员休息室 |

### 1.2 与现有系统的关系

- **星图系统**：飞船内有星图室，玩家可以在这里操作星图
- **战斗系统**：离开飞船内部视角进入战斗
- **飞船系统**：飞船内部空间与飞船构造一致

---

## 二、双视角切换系统

### 2.1 切换触发与键位

| 功能 | 按键 | 说明 |
|------|------|------|
| **切换视角（战斗 ↔ 飞船内）** | `Tab` | 一键切换两种视角 |
| **打开星图（战斗/驾驶视角）** | `C` | 在操控飞船时快速打开星图 |
| **互动（飞船内）** | `E` | 与 NPC、星图面板、驾驶座互动 |

**逻辑说明：**
- **战斗/驾驶视角**：按 `Tab` → 进入飞船内部
- **飞船内部视角**：按 `Tab` → 回到战斗/驾驶视角
- **飞船内部**：走到星图面板旁按 `E` → 打开星图 UI
- **战斗/驾驶视角**：按 `C` → 直接打开星图 UI

### 2.2 切换动画

**战斗视角 → 飞船内部视角：**
1. 屏幕中央出现「进入飞船」文字（打字机效果）
2. 相机平滑过渡（0.5 秒）
3. 环境音效切换（战斗音效 → 飞船内背景音）
4. 玩家角色从「飞船驾驶座」进入站立状态

**飞船内部视角 → 战斗视角：**
1. 玩家走到「出口」位置（或按下快捷键）
2. 屏幕中央出现「准备出击」文字
3. 相机切换回战斗视角
4. 环境音效切换（飞船内 → 战斗）

---

## 三、飞船内部空间设计

### 3.1 飞船布局总览

```
┌───────────────────────────────────────────────────────────────────────┐
│                        SILENT CANARY - 内部空间                        │
├───────────────────────────────────────────────────────────────────────┤
│                          ┌─────────┐                                   │
│                          │ 气闸室   │                                   │
│                          │(Airlock)│                                   │
│                          └────┬────┘                                   │
│                               │                                        │
│  ┌───────────────────────────┴───────────────────────────┐            │
│  │                                                         │            │
│  │                   ═══ 主指挥中心 ═══                   │            │
│  │                                                         │            │
│  │  ┌─────────┐              ┌─────────────────┐        │            │
│  │  │  驾驶室   │              │    星图区       │        │            │
│  │  │ (驾驶座)  │              │  (星图面板)     │        │            │
│  │  └─────────┘              └─────────────────┘        │            │
│  │                                                         │            │
│  └───────────────────────────┬───────────────────────────┘            │
│                               │                                        │
│          ┌────────────────────┼────────────────────┐                   │
│          │                    │                    │                   │
│    ┌─────┴─────┐      ┌─────┴─────┐      ┌─────┴─────┐             │
│    │  医疗室   │      │  工程舱   │      │   厨房    │             │
│    │ (Med Bay) │      │ (Engine)  │      │ (Galley)  │             │
│    └─────┬─────┘      └─────┬─────┘      └─────┬─────┘             │
│          │                    │                    │                   │
│    ┌─────┴─────┐      ┌─────┴─────┐      ┌─────┴─────┐             │
│    │  休息室 A  │      │  休息室 B  │      │  休息室 C  │             │
│    └───────────┘      └───────────┘      └───────────┘             │
│                                                             │
│    ┌───────────┐      ┌───────────┐      ┌───────────┐             │
│    │  休息室 D  │      │  休息室 E  │      │  休息室 F  │             │
│    └───────────┘      └───────────┘      └───────────┘             │
│                                                             │
│    ┌───────────┐      ┌───────────┐                               │
│    │  储物室    │      │  卫生间    │                               │
│    │ (Storage) │      │  (Lav.)   │                               │
│    └───────────┘      └───────────┘                               │
└───────────────────────────────────────────────────────────────────────┘
```

**核心设计：**
- **主指挥中心**：包含驾驶室和星图区，是飞船的核心空间
- **网状链接**：所有其他房间通过走廊链接到主指挥中心
- **房间清单**：
  - **主指挥中心**：驾驶室、星图区（合并为一个大空间）
  - **其他功能房间**：医疗室、工程舱、厨房、气闸室、卫生间、储物室
  - **NPC 休息室**：最多 6 个（A-F），可根据实际 NPC 数量调整

### 3.2 房间详细设计

#### 3.2.1 主指挥中心 (Main Command Center)

| 特性 | 说明 |
|------|------|
| **位置** | 飞船核心，网状布局的中心 |
| **包含** | 驾驶室 + 星图区 |
| **功能** | 飞船神经中枢，出击、操作星图、NPC 聚集 |
| **互动点** | 驾驶座、星图面板 |
| **视觉** | 宽敞的指挥中心、窗外宇宙星空、全息星图 |
| **音效** | 飞船引擎声、仪器哔哔声、星图扫描声 |

**说明：**
- 这是飞船最大的空间，是所有活动的中心
- NPC（通讯员、导航员）通常在这里工作

#### 3.2.2 驾驶室区域 (Cockpit Area)

| 特性 | 说明 |
|------|------|
| **位置** | 主指挥中心前部 |
| **功能** | 切换到战斗视角的入口 |
| **互动点** | 驾驶座（坐下 → 准备出击） |
| **视觉** | 驾驶座、控制面板、窗外宇宙 |
| **音效** | 飞船引擎声、仪器哔哔声 |

#### 3.2.3 星图区 (Star Chart Area)

| 特性 | 说明 |
|------|------|
| **位置** | 主指挥中心侧部 |
| **功能** | 操作星图、装备管理 |
| **互动方式** | 走到星图面板旁按 `E` 打开星图 UI |
| **视觉** | 全息星图投影 |
| **音效** | 星图扫描声、数据处理声 |

**额外说明：**
- 在战斗/驾驶视角也可以按 `C` 直接打开星图 UI
- 两种方式功能完全一致

#### 3.2.4 船员休息室 (Crew Quarters)

| 特性 | 说明 |
|------|------|
| **位置** | 飞船后部和侧面 |
| **数量** | 最多 **6 间**（A-F），可根据 NPC 数量调整 |
| **功能** | NPC 休息、与 NPC 互动 |
| **互动点** | NPC、床铺、储物柜 |
| **视觉** | 个性化装饰（每个 NPC 风格不同） |
| **音效** | 轻松的背景音乐、交谈声 |

#### 3.2.5 连接走廊 (Connecting Corridors)

| 特性 | 说明 |
|------|------|
| **布局** | 网状布局，从主指挥中心向外辐射 |
| **功能** | 玩家移动、连接各个房间 |
| **互动点** | 门、开关、装饰 |
| **视觉** | 金属地板、管道、灯光 |
| **音效** | 脚步声、飞船震动声 |

#### 3.2.6 医疗室 (Med Bay)

| 特性 | 说明 |
|------|------|
| **位置** | 驾驶室旁边 |
| **功能** | 恢复生命值、治疗异常状态 |
| **互动点** | 医疗床、医疗终端 |
| **视觉** | 白色、干净、医疗设备 |
| **音效** | 医疗设备的哔哔声 |

#### 3.2.7 工程舱 (Engineering)

| 特性 | 说明 |
|------|------|
| **位置** | 飞船后部 |
| **功能** | 飞船动力核心、可能的升级 |
| **互动点** | 引擎控制台、开关 |
| **视觉** | 复杂的管道、发光的引擎核心 |
| **音效** | 引擎轰鸣声、机械声 |

#### 3.2.8 厨房 (Galley)

| 特性 | 说明 |
|------|------|
| **位置** | 中央走廊旁边 |
| **功能** | NPC 聚集社交、可能的食物互动 |
| **互动点** | 餐桌、咖啡机 |
| **视觉** | 温馨的厨房、餐桌椅 |
| **音效** | 轻松的交谈声、餐具碰撞声 |

#### 3.2.9 气闸室 (Airlock)

| 特性 | 说明 |
|------|------|
| **位置** | 飞船边缘 |
| **功能** | （预留）太空行走、出舱任务 |
| **互动点** | 气闸门开关 |
| **视觉** | 厚重的舱门、舷窗 |
| **音效** | 气闸充气/放气声 |

#### 3.2.10 卫生间 (Lavatory)

| 特性 | 说明 |
|------|------|
| **位置** | 休息室附近 |
| **功能** | 基本卫生设施、氛围沉浸 |
| **互动点** | （简单互动即可） |
| **视觉** | 简洁的太空卫生间 |
| **音效** | 流水声、通风声 |

#### 3.2.11 储物室 (Storage Room)

| 特性 | 说明 |
|------|------|
| **位置** | 飞船侧面 |
| **功能** | 存放装备、道具 |
| **互动点** | 货架、箱子 |
| **视觉** | 堆叠的箱子、工具架 |
| **音效** | 箱子移动声、金属碰撞声 |

---

## 四、角色移动系统

### 4.1 控制方式（飞船内视角）

| 按键 | 功能 |
|------|------|
| `A` / `←` | 向左移动 |
| `D` / `→` | 向右移动 |
| `W` / `↑` / 向上移动 | 
| `S` / `↓ ` / 向上移动 | 
| `E` | 互动（NPC、星图、驾驶座） |
| `Tab` | 回到战斗/驾驶视角 |

### 4.2 移动参数

| 参数 | 值 | 说明 |
|------|-----|------|
| **移动速度** | 5 m/s | 标准 2D 平台游戏速度 |
| **重力** | 9.8 m/s² | 标准重力 |
| **加速度** | 20 m/s² | 快速响应 |
| **摩擦力** | 0.8 | 停止时减速快 |

### 4.3 动画状态机

```
Idle（待机）
  ↓
  ├─→ Walk（行走）←─┐ │
  └─→ Interact（互动）
```

---

## 五、NPC 互动系统

### 5.1 NPC 类型

| 类型 | 角色 | 性格 | 位置 |
|------|------|------|------|
| **工程师** | 负责飞船维护 | 认真、严谨 | 工程舱 |
| **导航员** | 负责星图操作 | 冷静、专注 | 星图室 |
| **医疗官** | 负责船员健康 | 温柔、关怀 | 医疗室 |
| **厨师/后勤** | 负责餐饮 | 热情、开朗 | 厨房 |
| **通讯员** | 负责通讯 | 活泼、外向 | 驾驶室 |
| **（其他 NPC）** | （待定） | （待定） | （待定） |

**说明：** 最多可容纳 6 个 NPC，可根据需求调整

### 5.2 互动方式

#### 5.2.1 聊天系统

**对话流程：**
1. 玩家走到 NPC 附近
2. 按 `E` 键开始对话
3. 显示对话框（文字 + 头像）
4. 玩家选择回复选项
5. NPC 回应，关系值变化

**对话示例：**
```
┌─────────────────────────────────────┐
│  [导航员头像]                        │
│                                     │
│  "今天的航线已经规划好了，你要     │
│   看看吗？"                         │
│                                     │
│  ○ 好的，让我看看                    │
│  ○ 不用了，谢谢                      │
│  ○ 今天有什么特别的吗？             │
└─────────────────────────────────────┘
```

#### 5.2.2 送礼系统

**送礼流程：**
1. 玩家从储物室或其他来源获得礼物
2. 走到 NPC 附近，按 `E` 键开始互动
3. 选择「送礼」选项（如果背包中有合适的物品）
4. NPC 接受（或拒绝）礼物
5. 关系值大幅变化

**礼物效果：**
| 礼物类型 | 关系值变化 | 说明 |
|---------|-----------|------|
| **喜欢的礼物** | +15~+25 | NPC 特别喜欢的 |
| **普通礼物** | +5~+10 | 一般性礼物 |
| **不喜欢的礼物** | -5~-10 | NPC 讨厌的 |
| **错误礼物** | -15~-20 | 完全不合适的 |

**NPC 喜好示例：**
| NPC | 喜欢 | 不喜欢 |
|-----|------|--------|
| 工程师 | 工具、零件 | 食物、装饰品 |
| 导航员 | 星图、书籍 | 噪音大的东西 |
| 医疗官 | 鲜花、茶 | 武器、暴力物品 |
| 通讯员 | 音乐、故事 | 枯燥的技术书 |

#### 5.2.3 关系系统

**关系等级：**
| 等级 | 关系值范围 | 解锁内容 |
|------|-----------|---------|
| **陌生人** | 0-20 | 基础对话 |
| **认识** | 21-50 | 更多话题 |
| **朋友** | 51-80 | 特殊礼物、支线任务 |
| **好友** | 81-100 | 秘密对话、特殊技能 |

**关系值变化影响：**
- 对话选项更多
- NPC 会主动提供帮助
- 解锁特殊道具
- 影响结局

---

## 六、视觉与音效

### 6.1 视觉风格

| 元素 | 风格 |
|------|------|
| **整体** | 复古科幻（70-80 年代太空电影） |
| **色彩** | 深蓝、灰色、金属色 |
| **光照** | 柔和的室内光，窗外星空 |
| **特效** | 轻微的镜头震动（飞船引擎）、全息投影 |

### 6.2 音效设计

| 场景 | 音效 |
|------|------|
| **飞船内部** | 引擎低频声、仪器哔哔声、空气循环声 |
| **移动** | 脚步声（金属地板）|
| **互动** | 按钮声、开门声、对话声 |
| **背景音乐** | 轻松的电子乐（战斗时切换） |

---

## 七、技术实现方案

### 7.1 系统架构

```
SpaceLifeManager (核心管理器)
├── CameraController (视角切换)
├── PlayerController2D (2D 角色移动)
│   ├── Movement (移动)
│   └── Interaction (互动)
├── RoomManager (房间管理)
│   ├── Cockpit (驾驶室)
│   ├── StarChartRoom (星图室)
│   └── CrewQuarters (船员休息室)
├── NPCManager (NPC 管理)
│   ├── DialogueSystem (对话系统)
│   ├── GiftSystem (送礼系统)
│   └── RelationshipSystem (关系系统)
└── AudioManager (音效管理)
```

### 7.2 关键脚本

#### 7.2.1 SpaceLifeManager.cs
```csharp
public class SpaceLifeManager : MonoBehaviour
{
    public static SpaceLifeManager Instance { get; private set; }
    
    public bool IsInSpaceLifeMode { get; private set; }
    
    public event Action OnEnterSpaceLife;
    public event Action OnExitSpaceLife;
    
    public void EnterSpaceLife() { ... }
    public void ExitSpaceLife() { ... }
}
```

#### 7.2.2 PlayerController2D.cs
```csharp
public class PlayerController2D : MonoBehaviour
{
    [SerializeField] private float _moveSpeed = 5f;
    [SerializeField] private float _jumpForce = 8f;
    
    private Rigidbody2D _rb;
    private bool _isGrounded;
    
    private void Update()
    {
        HandleMovement();
        HandleJump();
        HandleInteraction();
    }
}
```

#### 7.2.3 NPCController.cs
```csharp
public class NPCController : MonoBehaviour
{
    [SerializeField] private NPCDataSO _npcData;
    
    public int RelationshipValue { get; private set; }
    
    public void StartDialogue() { ... }
    public void GiveGift(ItemSO gift) { ... }
}
```

### 7.3 数据结构

#### 7.3.1 NPCDataSO (ScriptableObject)
```csharp
[CreateAssetMenu(fileName = "NPCData", menuName = "Project Ark/NPC Data")]
public class NPCDataSO : ScriptableObject
{
    public string npcName;
    public Sprite avatar;
    public NPCRole role;
    
    [Header("对话")]
    public List<DialogueLine> defaultDialogues;
    public List<DialogueLine> friendDialogues;
    
    [Header("喜好")]
    public List<ItemSO> likedGifts;
    public List<ItemSO> dislikedGifts;
}
```

#### 7.3.2 DialogueLine
```csharp
[Serializable]
public class DialogueLine
{
    public string speakerName;
    public string text;
    public List<DialogueOption> options;
}

[Serializable]
public class DialogueOption
{
    public string optionText;
    public DialogueLine nextLine;
    public int relationshipChange;
}
```

---

## 八、MVP 实现计划

### Phase 1：基础框架（1-2 天）
- 双视角切换系统
- 飞船内部场景搭建
- 2D 角色移动控制器
- 基础碰撞检测

### Phase 2：房间系统（2-3 天）
- 驾驶室功能
- 星图室功能
- 中央走廊
- 房间切换（门）

### Phase 3：NPC 系统（3-4 天）
- NPC 预制体
- 对话系统基础
- 关系系统
- 基础 UI

### Phase 4：完整互动（2-3 天）
- 送礼系统
- 更多对话选项
- 关系等级解锁
- 音效与视觉效果

---

## 九、讨论与待确定事项

### 9.1 已确定事项

| 事项 | 决定 |
|------|------|
| **战斗与生活的平衡** | 玩家可以**频繁切换视角**，无限制 |
| **NPC 房间数量** | 最多 **6 个**船员休息室 |
| **背包** | 不需要单独的背包 UI |

### 9.2 待讨论问题

1. **NPC 数量和角色**
   - 具体有几个 NPC？（最多 6 个）
   - 每个 NPC 的名字、性格、职责？

2. **飞船规模**
   - 除了 6 个船员休息室外，还有哪些房间？
   - 每个房间的具体大小？

3. **礼物来源**
   - 礼物从哪里获得？
   - 战斗掉落？还是其他方式？

4. **关系系统的实际收益**
   - 关系值高能给玩家什么实质性好处？
   - 是否影响战斗能力？

### 9.2 技术风险

| 风险 | 说明 | 缓解方案 |
|------|------|---------|
| **场景切换卡顿** | 大场景加载可能慢 | 使用异步加载、场景分块 |
| **2D 与 3D 混合** | 战斗是 3D，飞船内是 2D | 明确划分两个模式 |
| **NPC AI 复杂度** | NPC 需要有日常行为 | 简化为「闲逛 + 站定」 |

---

## 十、参考作品

| 作品 | 值得借鉴的点 |
|------|-------------|
| **Stardew Valley** | NPC 对话、送礼、关系系统 |
| **Hollow Knight** | 2D 平台移动手感 |
| **FTL: Faster Than Light** | 飞船内部管理 |
| **Mass Effect** | 飞船内探索、NPC 互动 |
| **Animal Crossing** | 轻松的日常氛围 |

---

**文档结束**

---

## 讨论邀请

我已经为你细化了太空生活系统的设计！以下是我想和你讨论的关键点：

1. **NPC 数量和角色**：你希望有几个 NPC？他们分别负责什么？
2. **飞船规模**：飞船内部要做多大？房间数量？
3. **战斗与生活的切换频率**：玩家会频繁切换吗？还是每次战斗后回去休息？
4. **礼物系统**：礼物从哪里来？商店？战斗掉落？
5. **关系系统的实际收益**：关系好除了对话多，还有什么好处？

你觉得这个设计方向怎么样？我们可以继续细化任何部分！🚀
